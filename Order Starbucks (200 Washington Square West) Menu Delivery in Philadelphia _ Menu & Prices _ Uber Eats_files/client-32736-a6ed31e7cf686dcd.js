"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[32736],{9023:(E,e,t)=>{t.d(e,{A:()=>O});var _=t(50371),R=t(58276),o=t(93617);function O(E){const e=(0,_.g)().sectionUuid,t=(0,R.A)();if(!E)return null;if("USE_SECTION_AS_CATEGORY"===E.menuDisplayType)return(0,o.F2)(E);const O=(E.sections||[]).map((E=>E.uuid)),r=O.find((E=>E===e))||O[0];return e&&!t&&r?r:(0,o.F2)(E)}},28123:(E,e,t)=>{t.d(e,{OL:()=>O,Sl:()=>o,iC:()=>R});var _=t(56831);const R=E=>"USE_SECTION_AS_CATEGORY"===E.menuDisplayType,o=E=>R(E)?"grocery":"restaurant",O=E=>R(E)?_.sS.GR:_.sS.OFD},41911:(E,e,t)=>{t.d(e,{Oz:()=>r,Q8:()=>n,pY:()=>O});var _=t(21499);const R="uev2.bandwagon",o=(E,e)=>({"0%":{backgroundColor:`${E}`},"45%":{backgroundColor:`${e}`},"55%":{backgroundColor:`${e}`},"100%":{backgroundColor:`${E}`}}),O=E=>({alignItems:"center",animationDelay:"4s",animationDuration:"2.5s",animationIterationCount:"infinite",animationName:E.shouldPulse?o(E.theme.colors.positive,E.theme.colors.positive300):"none",backgroundColor:E.shouldPulse?E.theme.colors.positive:E.theme.colors.positive50,color:E.shouldPulse?E.theme.colors.onPositive:E.theme.colors.onPositive50,display:"flex",justifyContent:"center",height:E.height?`${E.height}px`:"auto",overflow:"hidden"}),r=E=>{const e=(0,_.bu)(R).count;if(E){const E=e?e+1:1;E<=5&&(0,_.Vv)(R,{count:E})}return{count:e,reachedLimit:e>=5}},n=E=>(E.anyUuid||E.feedItemUuid||E.storeUuid)&&E.countdowns.find((e=>e.timerValidLabel===E.countdownLabel&&(E.anyUuid||e.feedItemUuids.includes(E.feedItemUuid)||e.storeUuids.includes(E.storeUuid))))||null},56831:(E,e,t)=>{t.d(e,{A2:()=>s,Ei:()=>N,Ke:()=>o,M8:()=>D,Oe:()=>r,Qs:()=>T,TW:()=>S,c4:()=>O,el:()=>i,i7:()=>A,o6:()=>a,sO:()=>I,sS:()=>u,t4:()=>n});var _=t(44743),R=t(8474);const o=160,O=6,r=4,n=5,i=1280,T=76,S=60,I="0379a62a-1156-4ddb-a09a-7e1dc45d5dfb",s="7831870f-bd8a-4a2d-8db9-d1c7942d26c0",A="b5c84bc6-4cba-4416-81c7-b65dfa450fa4",N=(0,_.A)({buyXGetYItemPromotion:null,volumeDiscountPromotion:null,multiSKUFlatPromotion:null}),a=[R.Q71.primaryBundledStoreUuid,R.Q71.primaryDraftOrderUUID,R.Q71.liveOrderUuid,R.Q71.savingsId,R.Q71.promoCode,R.Q71.savingsCtaType,R.Q71.promoSnackbar,R.Q71.entryActionType,R.Q71.entryActionValue,R.Q71.journey,R.Q71.deliveryType,R.Q71.isXLBTripDestination,R.Q71.serializedRequestContext,R.Q71.xlbEntry,R.Q71.isMatchbox,"marketingVistorId","uclickId"],D=["utmCampaign","utmContent","utmSource","utmMedium","utmTerm","googleClickId","metaClickId"],u=(0,_.A)({OFD:"OFD",GR:"GR"})},58276:(E,e,t)=>{t.d(e,{A:()=>o});var _=t(50371);const R=["nugget","start-group-order","share-group-order","lock-group-order","cancel-group-order","store-info","store-info-byoc","menus","error"];function o(){const E=(0,_.g)();return R.includes(E.sectionUuid||"")}},61758:(E,e,t)=>{t.d(e,{X2:()=>_,cQ:()=>R});Object.freeze({NONE:"NONE",PILL:"PILL"}),Object.freeze({UNKNOWN:"UNKNOWN",StoreNotOrderable:"StoreNotOrderable",MembershipBenefit:"MembershipBenefit",TOP_EATS:"TOP_EATS",RATINGS:"RATINGS",DISTANCE:"DISTANCE",ETD:"ETD",SPONSORED:"SPONSORED",SCHEDULE_ORDER:"SCHEDULE_ORDER",PICKUP_ORDER:"PICKUP_ORDER",FARE:"FARE",CLOSED:"CLOSED",SURGE_OPTIONALITY:"SURGE_OPTIONALITY",CLOSED_ETA:"CLOSED_ETA",ALLERGY_DISCLAIMER:"ALLERGY_DISCLAIMER",SIGNPOSTS:"SIGNPOSTS",SAVER_DELIVERY:"SAVER_DELIVERY",NEW_STORE:"NEW_STORE",ARRIVE_WITH_RIDE_ETD:"ARRIVE_WITH_RIDE_ETD",PRICE_BUCKET:"PRICE_BUCKET",PROMOTION_BOOST:"PROMOTION_BOOST",PRIORITY_DELIVERY:"PRIORITY_DELIVERY",ITEM_COUNT:"ITEM_COUNT",IN_STORE_PRICES_SIGNPOST:"IN_STORE_PRICES_SIGNPOST",PICKUP_TRAVEL_TIME:"PICKUP_TRAVEL_TIME",CUISINE:"CUISINE"}),Object.freeze({PLAIN:"PLAIN",BANNER:"BANNER",CARD:"CARD",STEPPER:"STEPPER",CALLOUT:"CALLOUT"});const _=Object.freeze({UNKNOWN:"UNKNOWN",BOTTOM_SHEET:"BOTTOM_SHEET",COMPLETE_ORDER:"COMPLETE_ORDER",CALL_PHONE:"CALL_PHONE",REQUEST_ORDER_UPDATE:"REQUEST_ORDER_UPDATE",NAVIGATE_TO_STORE:"NAVIGATE_TO_STORE",TIP:"TIP",OPEN_MULTI_RESTAURANT_DRAWER:"OPEN_MULTI_RESTAURANT_DRAWER",MEMBERSHIP:"MEMBERSHIP",SHOW_ORDER_DETAILS:"SHOW_ORDER_DETAILS",ORDER_NOT_YET_READY:"ORDER_NOT_YET_READY",RIDE_TO_STORE:"RIDE_TO_STORE",AUTONOMOUS_DELIVERY_UNLOCK_VEHICLE:"AUTONOMOUS_DELIVERY_UNLOCK_VEHICLE",AUTONOMOUS_DELIVERY_FIND_VEHICLE:"AUTONOMOUS_DELIVERY_FIND_VEHICLE",AUTONOMOUS_DELIVERY_CALL_OPERATOR:"AUTONOMOUS_DELIVERY_CALL_OPERATOR",AUTONOMOUS_DELIVERY_CONTACT_SUPPORT:"AUTONOMOUS_DELIVERY_CONTACT_SUPPORT",UPDATE_DELIVERY_INSTRUCTIONS:"UPDATE_DELIVERY_INSTRUCTIONS",BOOK_UBER_RIDE:"BOOK_UBER_RIDE",UPDATE_DELIVERY_ADDRESS:"UPDATE_DELIVERY_ADDRESS",UPDATE_INTERACTION_TYPE:"UPDATE_INTERACTION_TYPE",AUTONOMOUS_DELIVERY_RECEIVE_ORDER:"AUTONOMOUS_DELIVERY_RECEIVE_ORDER",AUTONOMOUS_DELIVERY_RECEIVE_ORDER_CONFIRM:"AUTONOMOUS_DELIVERY_RECEIVE_ORDER_CONFIRM",AUTONOMOUS_DELIVERY_RECEIVE_ORDER_DISMISS:"AUTONOMOUS_DELIVERY_RECEIVE_ORDER_DISMISS",SCHEDULE_ORDER:"SCHEDULE_ORDER",VIEW_STORE:"VIEW_STORE",UPDATE_COMPLIANCE_CONSENTS:"UPDATE_COMPLIANCE_CONSENTS",AUTONOMOUS_DELIVERY_HONK_HORN:"AUTONOMOUS_DELIVERY_HONK_HORN",PICKUP_ORDER:"PICKUP_ORDER",NAVIGATE_TO_FEED:"NAVIGATE_TO_FEED",REPORT_TRANSLATION_ISSUES:"REPORT_TRANSLATION_ISSUES",COPY_TO_CLIPBOARD:"COPY_TO_CLIPBOARD",OPEN_DEEP_LINK:"OPEN_DEEP_LINK",CLAIM_OFFER:"CLAIM_OFFER",REDEEM_OFFER:"REDEEM_OFFER",SHOW_OFFER:"SHOW_OFFER",CREATE_SAME_STORE_ADD_ON_ORDER:"CREATE_SAME_STORE_ADD_ON_ORDER",VIEW_RECEIPT:"VIEW_RECEIPT",LAUNCH_LIVE_ORDER_EDITING:"LAUNCH_LIVE_ORDER_EDITING",UPDATE_REPLACEMENT_PREFERENCES:"UPDATE_REPLACEMENT_PREFERENCES",OPEN_WEB_LINK:"OPEN_WEB_LINK",OPEN_EWF_RELATIVE_LINK:"OPEN_EWF_RELATIVE_LINK",UPDATE_OFFER_CARD:"UPDATE_OFFER_CARD",OPEN_RESERVATION_DETAILS:"OPEN_RESERVATION_DETAILS",BOOK_RESERVATION_TRY_AGAIN:"BOOK_RESERVATION_TRY_AGAIN",BOOK_RESERVATION_FIND_NEW_TABLE:"BOOK_RESERVATION_FIND_NEW_TABLE",RESERVATION_GRID_TRY_AGAIN:"RESERVATION_GRID_TRY_AGAIN",UPDATE_DELIVERY_OPTION:"UPDATE_DELIVERY_OPTION"}),R=(Object.freeze({TOP_CENTERED:"TOP_CENTERED",FULL_WIDTH:"FULL_WIDTH",FULL_HEIGHT:"FULL_HEIGHT"}),Object.freeze({UNKNOWN:"UNKNOWN",PRIMARY_STORE:"PRIMARY_STORE",ADD_ON_STORE:"ADD_ON_STORE"}),Object.freeze({UNKNOWN:"UNKNOWN",COPY:"COPY"}),Object.freeze({DYNAMIC_BOOKING_FEE:"DYNAMIC_BOOKING_FEE",BUSY_AREA_FEE:"BUSY_AREA_FEE",MEAL_VOUCHER:"MEAL_VOUCHER",ORDER_HISTORY:"ORDER_HISTORY",BANDWAGON:"BANDWAGON",ALLERGEN_DISCLAIMER:"ALLERGEN_DISCLAIMER",AGGREGATOR_STOREFRONT:"AGGREGATOR_STOREFRONT",UNKNOWN:"UNKNOWN",OTHER_FEES:"OTHER_FEES",SERVICE_FEES:"SERVICE_FEES",FEE_DISCLAIMER:"FEE_DISCLAIMER",BASKET_SIZE:"BASKET_SIZE",RESERVED_12:"RESERVED_12",RESERVED_13:"RESERVED_13",RESERVED_14:"RESERVED_14",RESERVED_15:"RESERVED_15",RESERVED_16:"RESERVED_16",RESERVED_17:"RESERVED_17"}),Object.freeze({DEFAULT:"DEFAULT",COLLAPSED:"COLLAPSED",REQUIRED_SINGLE_OPTION:"REQUIRED_SINGLE_OPTION",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({ANY_STORE:"ANY_STORE",IS_BASKET_FROM_SAME_STORE:"IS_BASKET_FROM_SAME_STORE",IS_BASKET_NOT_FROM_SAME_STORE:"IS_BASKET_NOT_FROM_SAME_STORE",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS",TOP_EATS_PROMISE:"TOP_EATS_PROMISE",EATS_PROMISE:"EATS_PROMISE"}));Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS",IN_STORE_PRICING:"IN_STORE_PRICING",ETA:"ETA",HEALTH_GRADE:"HEALTH_GRADE"}),Object.freeze({NONE:"NONE",LINE:"LINE",SPACE:"SPACE"}),Object.freeze({UNKNOWN:"UNKNOWN",NO_RUSH_DELIVERY:"NO_RUSH_DELIVERY",STANDARD_DELIVERY:"STANDARD_DELIVERY",PREMIUM_DELIVERY:"PREMIUM_DELIVERY",ETD_SURGE_DELIVERY:"ETD_SURGE_DELIVERY",OPT_IN_TYPE_RESERVED_5:"OPT_IN_TYPE_RESERVED_5",OPT_IN_TYPE_RESERVED_6:"OPT_IN_TYPE_RESERVED_6",OPT_IN_TYPE_RESERVED_7:"OPT_IN_TYPE_RESERVED_7"})},84530:(E,e,t)=>{t.d(e,{A:()=>_});var _=function(E){var e,t;if("function"!=typeof E)throw new Error("expected a function but got "+E);return function(){return e||(e=!0,t=E.apply(this,arguments),E=void 0),t}}},85964:(E,e,t)=>{t.d(e,{Dd:()=>C,kS:()=>V,AN:()=>m,El:()=>M,bA:()=>f,$v:()=>p,bL:()=>l});var _=t(84028),R=t(17649),o=t(15010),O=t(21251),r=t(8474),n=t(11752),i=t(73792),T=t(91156),S=t(65493),I=t(90417),s=t(50371),A=t(98912),N=t(73077),a=t(67508),D=t(28123),u=t(9023),c=t(84167),d=t(49386),L=t(57972),U=t(86105);const P=E=>{const e="UNKNOWN";if(!E)return e;let t;try{t=JSON.parse(E)}catch(E){return e}if(t?.metaInfo&&"object"==typeof t.metaInfo){const E=t.metaInfo?.analyticsLabel;if("string"==typeof E)return E}return e};function C(E){return E.isDraftOrderCreator?o.H.groupOrderCreator:E.isDraftOrderParticipant?o.H.groupOrderParticipant:o.H.singleOrder}function l(E){const e=(0,S.A)(E);return"object"==typeof e.deliveryTime&&"scheduled"in e.deliveryTime?o.I.scheduled:o.I.asap}const V=(E,e)=>{if(!e)return"Single Level List";const t=(0,D.iC)(E)?"Multi Level":"Single Level",_=E.catalogSectionsMap?.[e]||[],R=_.some((E=>{const e=(0,a.Kx)(E);return(e?.catalogItems||[]).some((E=>"LIST"===E.displayType))})),o=_.some((E=>{const e=(0,a.Kx)(E);return(e?.catalogItems||[]).some((E=>"GRID"===E.displayType))}));return`${t} ${R&&o?"Mixed":R?"List":"Grid"}`};function M(E){let{store:e,isLegacyStorePayload:t,activeSectionUuid:o}=E;const D=(0,_.M)(),u=(0,U.W6)(),d=C((0,R.A)()),M=(0,i.W)(),m=(0,L.It)()||"",p=l(e.uuid),f=(0,T.Ay)(),y=function(E){return"USE_SECTION_AS_CATEGORY"===E.menuDisplayType?1:E.sections?.length||0}(e),Y=(0,a.AF)(e.catalogSectionsMap||{}),g=e.timing,F=e.parentChain?.uuid||"",b=e.citySlug||"",G=new URLSearchParams(u.location.search).get(r.Q71.trackingCode)||"",h=P(G),{title:K,uuid:B,currencyCode:v,status:H,isVirtualized:W,isLost:Q}=(0,A.WT)(e),j=e.storeInfoMetadata?.storeAvailablityStatus?.state,{activePreferenceType:k,deliveryLocation:z}=(0,S.A)(e.uuid),w="USE_SECTION_AS_CATEGORY"===e.menuDisplayType?"grocery":"restaurant",x=V(e,o),$=(0,I.useContext)(c.nW),X=(0,I.useMemo)((()=>Boolean($.get("journeySessionId"))),[$]),q=(0,I.useMemo)((()=>{const E=$.get("journeyPluginName");return E?String(E):""}),[$]),J=(0,n.A)(),Z=(0,I.useMemo)((()=>{const E=(0,N.k8)(J);return(E?(0,O.Yv)((0,O.cz)(E)):"")===(z?(0,O.Yv)((0,O.cz)(z)):"")}),[J,z]),EE=(0,s.g)(),eE=(0,I.useMemo)((()=>{const{storeUuid:E}=(0,r.G9G)(EE);return E===B}),[EE,B]);(0,I.useEffect)((()=>{g&&f("eats:store",{store:{title:K,uuid:B,currencyCode:v,status:H,isVirtualized:W,isLost:Q},isLegacyStorePayload:t,storeAvailabilityState:j,isJourneySession:X,journeyPluginName:q,doesDeliveryAddressMatchCookie:Z,doesStoreMatchParam:eE,activePreferenceType:k,vertical:w,slug:b,supportedDiningModes:e?.supportedDiningModes,storeMainView:{previousPath:D,diningMode:M,deliveryType:m,numMenus:y,numItems:Y,chainUUID:F,orderRole:d,deliveryTime:p,storeLayout:x,loadTime:g,isOrderable:e.isOrderable||!1,sectionsCount:e.sections.length||0,hasActivePromotions:e.hasStorePromotion||!1,sourceType:h}})}),[f,K,B,v,j,X,q,H,Q,t,k,b,D,M,m,Y,y,w,F,d,p,x,g,W,e?.supportedDiningModes,Z,eE,e.hasStorePromotion,e.isOrderable,e.sections.length,h])}function m(){const E=(0,T.Ay)(),e=(0,R.A)();return function(t,_,R){E("eats:store_menu_switcher_select",{storeMenuSwitcher:{storeUUID:t,isMenuOpen:_,orderRole:C(e),merchantType:R||""}})}}function p(){const E=(0,T.Ay)(),{store:e}=(0,d.oX)(),t=(0,u.A)(e?.data);return _=>{let{searchSource:R,searchDataInfoLayer:o,searchDataInfoTab:O}=_;if(!e?.data)return;const r=e.data;E("eats:store_search_started",{searchSource:R,storeUuid:r.uuid||"",searchDataInfo:{layer:o,tab:O,locationType:r.location?.locationType},storeLayout:V(r,t)})}}function f(){const{store:E}=(0,d.oX)(),e=(0,T.Ay)(),t=(0,u.A)(E?.data);return _=>{let{catalogSectionItemEventArgs:R,currentQuery:o}=_;E?.data&&e("eats:store_search_result_click",{storeCatalog:{itemUuid:R.itemUuid,storeUuid:R.storeUuid,position:R.position,query:o},storeLayout:V(E.data,t)})}}},86083:(E,e,t)=>{t.d(e,{A:()=>i});var _=t(90417),R=t(65416),o=t(73077),O=t(11752),r=t(84530),n=t(41911);function i(E){const e=(0,O.A)(),t=(0,_.useCallback)((0,r.A)((E=>{(0,o.rO)(e,E)})),[]),i=(0,R.d4)((E=>{let{countdowns:e}=E;return e})),S=(0,n.Q8)({countdowns:i&&i.data||[],countdownLabel:"BANDWAGON",feedItemUuid:E.feedItemUuid,storeUuid:E.storeUuid}),I=(0,_.useRef)(!1),s=(0,_.useRef)(!1),A=(0,o.bs)(e);if(A){I.current=(A.storeUuids||[]).includes(E.storeUuid);const e=T(Date.now()),t=T(A.timestampEnd);s.current=e<t}return(0,_.useEffect)((()=>{S&&!I.current&&t({storeUuids:S.storeUuids,timestampEnd:S.timestamp.end}),I.current&&!s.current&&t(null)}),[S,t]),Boolean(S||I.current&&s.current)}const T=E=>parseInt(E/1e3)},93617:(E,e,t)=>{t.d(e,{F2:()=>i,LN:()=>O,O$:()=>n,Ss:()=>o,Ui:()=>T,VH:()=>r,we:()=>S});var _=t(97684),R=t(61758);function o(E){return Boolean(E)&&"geolocation_api"!==E?.originType}function O(E,e){return E.indicatorIcons&&E.indicatorIcons.find((function(E){if("typeV2"in E&&E.typeV2===e)return E;if("type"in E&&E.type===e){return e in R.cQ?E:null}}))}function r(E){return null!=E&&Boolean(O(E,"ETA"))}function n(E){let{itemStyle:e,isGrocery:t}=E;return e?.imageContentMode?"FIT"===e.imageContentMode?"contain":"cover":t?"contain":"cover"}function i(E){return"USE_SECTION_AS_CATEGORY"===E.menuDisplayType?(0,_.X)(E.catalogSectionsMap||{})[0]:(E.sections||[]).find((E=>E.isTop))?.uuid||E.sections[0]?.uuid}const T=E=>function(E){return void 0!==E.itemDescription}(E)&&E.isLegacy&&E.description?E.description:function(E){return void 0!==E.itemDescriptionBadge}(E)?E.itemDescriptionBadge?E.itemDescriptionBadge?.text||"":E.itemDescription||"":E.itemDescription?E.itemDescription:"",S=E=>"MERCHANT_TYPE_RESTAURANT"===(E?.orderMetadata?.uberMerchantType?.type||"")}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/web-eats-v2/client-32736-a6ed31e7cf686dcd.js.map