"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[66068],{14657:(t,e,i)=>{i.d(e,{A:()=>h});var r=i(66764),n=i(65714),a=i("__fusion__8672dec7d9"),o=i(50371),l=i(76022),s=i(41967),d=i(66371),u=i(85951),c=i(5230),m=i(57674),p=i(40014);const I=(0,s.I4)("div",(()=>({display:"flex",justifyContent:"right"}))),_=(0,s.I4)(n.$n,(t=>{let{$theme:e}=t;return{display:"flex",gap:e.sizing.scale300}})),h=()=>{const{liveOrderStoreUuid:t}=(0,m.A)(),{restaurantLink:e,onGoToStore:i}=(0,l.A)({storeUuid:t}),n=(0,o.W6)(),{startTiming:s}=(0,d.zR)(),h=(0,c.A)();return(0,p.Y)(I,{children:(0,p.FD)(_,{onClick:()=>{s(u.s.CART_ADD_ITEM_CLICK,{shouldOverride:!0}),i(),n.push(e)},kind:"secondary",size:"compact",shape:"pill",...h?{overrides:{Root:{style:t=>{let{$theme:e}=t;return e.typography.LabelSmall}}}}:null,children:[(0,p.Y)(a.default,{size:16}),(0,p.Y)(r.H,{id:"shared.addItems"})]})})}},17923:(t,e,i)=>{i.d(e,{$k:()=>r,Zn:()=>n});Object.freeze({GRATIS_STATUS_INVALID:"GRATIS_STATUS_INVALID",GRATIS_STATUS_NO_UPDATE:"GRATIS_STATUS_NO_UPDATE",GRATIS_STATUS_APPLIED:"GRATIS_STATUS_APPLIED",GRATIS_STATUS_REVOKED:"GRATIS_STATUS_REVOKED"});const r=Object.freeze({ENTRY_POINT_INVALID:"ENTRY_POINT_INVALID",ENTRY_POINT_APP:"ENTRY_POINT_APP",ENTRY_POINT_XLB_TOP_EATS_TAB:"ENTRY_POINT_XLB_TOP_EATS_TAB",ENTRY_POINT_XLB_NAVA_TILE:"ENTRY_POINT_XLB_NAVA_TILE",ENTRY_POINT_EMC_SEE_ALL:"ENTRY_POINT_EMC_SEE_ALL",ENTRY_POINT_EMC_MERCHANT:"ENTRY_POINT_EMC_MERCHANT",ENTRY_POINT_RING_GENERAL:"ENTRY_POINT_RING_GENERAL",ENTRY_POINT_RING_MERCHANT:"ENTRY_POINT_RING_MERCHANT"}),n=Object.freeze({LAST_ACTION_INVALID:"LAST_ACTION_INVALID",LAST_ACTION_BROWSE_STOREFRONT:"LAST_ACTION_BROWSE_STOREFRONT",LAST_ACTION_ADD_TO_CART:"LAST_ACTION_ADD_TO_CART",LAST_ACTION_BROWSE_ITEM_PAGE:"LAST_ACTION_BROWSE_ITEM_PAGE",LAST_ACTION_BROWSE_HOME_PAGE:"LAST_ACTION_BROWSE_HOME_PAGE"})},20796:(t,e,i)=>{i.d(e,{S:()=>r});const r={cell:"cell",section:"section",module:"module"}},21635:(t,e,i)=>{i.d(e,{A:()=>a});var r=i(40304),n=i(1139);function a(){return(0,r.vm)({...n.z.store_gr_schedule_cart_action_enabled,defaultValue:!1})}},27417:(t,e,i)=>{i.d(e,{R:()=>r});const r={red:{BRAND_CONTENT_PRIMARY:"BORDER_NEGATIVE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR",BRAND_CONTENT_ON_SECONDARY:"NEGATIVE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_NEGATIVE",BRAND_BORDER_ACCESSIBLE:"BORDER_NEGATIVE"},yellow:{BRAND_CONTENT_PRIMARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_ON_SECONDARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_WARNING",BRAND_BORDER_ACCESSIBLE:"CONTENT_MEMBERSHIP"},control:{BRAND_CONTENT_PRIMARY:"BORDER_POSITIVE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR",BRAND_CONTENT_ON_SECONDARY:"BORDER_POSITIVE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_POSITIVE",BRAND_BORDER_ACCESSIBLE:"BORDER_POSITIVE"}}},39212:(t,e,i)=>{i.d(e,{A:()=>s});var r=i(19017),n=i(27417);const a=(t,e)=>(n.R[t]??n.R.control)[e]??e,o=(t,e,i)=>t?1===e.length?{...t,[e[0]]:i}:{...t,[e[0]]:o(t[e[0]],e.slice(1),i)}:t,l=(t,e)=>{if("illustrationContent"===t?.type&&"icon"===t.illustrationContent.illustration?.illustration.type&&t.illustrationContent.illustration?.illustration.icon.color){const i=t.illustrationContent.illustration.illustration.icon.color;return o(t,["illustrationContent","illustration","illustration","icon","color"],a(e,i))}return t};const s=function(t){const e=(0,r.kj)();if(!t)return null;let i={...t};return["title","subtitle","tertiaryTitle"].forEach((t=>{const r=i[t];r?.richTextElements&&Array.isArray(r.richTextElements)&&(i[t].richTextElements=r.richTextElements.map((t=>((t,e)=>{if("text"===t.type&&t.text?.text){const i=t.text.text.color;return o(t,["text","text","color"],a(e,i))}return t})(t,e))))})),"illustrationContent"===i.leadingContent?.type&&"icon"===i.leadingContent.illustrationContent.illustration?.illustration.type&&i.leadingContent.illustrationContent.illustration?.illustration.icon.color&&(i={...i,leadingContent:l(i.leadingContent,e)}),i}},41707:(t,e,i)=>{i.d(e,{A:()=>Gt});var r=i("__fusion__95b4ba69e5"),n=i(90417),a=i(57716),o=i(50371),l=i(86105),s=i(66764),d=i(41967),u=i(8474),c=i(41908),m=i(2693),p=i(43316),I=i(253),_=i(11426),h=i(80672),T=i(73939),A=i(63331),g=i(35508),C=i(78103),E=i(14337),O=i(7139),N=i(66371),y=i(85951),f=i(40014);const R=t=>{let{item:e,storeUuid:i,isDisabled:r,isLoading:a,cartQuantity:o,onUpdate:l,decimalQuantity:s,overrideQuantityConstraints:d,overridingMeasurementType:u}=t;const[c,m]=(0,n.useState)(g.R9.from(s??o)),p=(0,n.useRef)(c);(0,n.useEffect)((()=>{m(g.R9.from(s??o)),p.current=g.R9.from(s??o)}),[s,o]);const{startTiming:I}=(0,N.zR)(),_=(0,O.ES)(e,d),h=(0,n.useRef)(void 0),T=(0,n.useCallback)((t=>{I(`${y.s.UPDATE_ITEM_QUANTITY_WITH_DEBOUNCE}_${e?.uuid||""}`,{shouldOverride:!0});const i=g.R9.from(_.increment??1).multiply(t===E.n_.increment?1:-1);let r=g.R9.from(p.current).add(i);(_.minPermitted&&r.lt(_.minPermitted)||r.lt(0))&&(r=g.R9.from(0)),p.current=r;const n=0===r.toFloat();m(r),clearTimeout(h.current),h.current=setTimeout((()=>{I(`${y.s.UPDATE_ITEM_QUANTITY}_${e?.uuid||""}`,{shouldOverride:!0}),l(r.toFloat())}),n?0:750)}),[e,_.increment,_.minPermitted,l,I]);return(0,f.Y)(C.A,{type:"secondary",storeUuid:i,item:e,quantity:c,updateQuantity:T,isDisabled:r||a,overrideQuantityConstraints:d,overridingMeasurementType:u,isRemovable:!0})};var S=i(56838),D=i(84888),U=i(98042),Y=i(91156);const v=(0,d.I4)("div",{marginRight:"8px",pointerEvents:"auto"});function L(t){let{cartItemActions:e,onRemove:i,onReplace:r,onSchedule:a,disabled:o}=t;const l=(0,n.useRef)(!1),s=(0,Y.Ay)(),d=Array.from(e||[]);return(0,n.useEffect)((()=>{l.current||(d.forEach((t=>{s("eats:cart_item_action_impression",{type:String(t.cartItemActionType||"")})})),l.current=!0)}),[s,d]),(0,f.Y)(f.FK,{children:d.map((t=>null==t.buttonViewModel?null:(0,f.Y)(v,{children:(0,f.Y)(U.A,{isDisabled:o,viewModel:t.buttonViewModel,onClick:e=>{e.preventDefault(),(t=>{switch(s("eats:cart_item_action_click",{type:String(t||"")}),t){case"REMOVE":return i();case"REPLACE":return r();case"SCHEDULE":return a();case"UNKNOWN":;}})(t.cartItemActionType)}})},t.cartItemActionType)))})}var b=i(19589),B=i(86879),P=i(32879),x=i(17649),$=i(6531),F=i(37036),M=i(78275),G=i(12830),k=i(8700),w=i(50375),V=i(76044);var z=i(39431),Q=i(22121),W=i(83934),H=i(60331),q=i(31725),K=i(47120),j=i(53518),X=i(82096),Z=i(21635),J=i(50685),tt=i(85906),et=i(23977),it=i(85913),rt=i(57674),nt=i(92208),at=i(27499);var ot=i(54038),lt=i(91443);const st=(0,d.I4)("li",(t=>{let{$theme:e}=t;return{width:"100%",paddingTop:"8px",":first-child":{paddingTop:"4px"},color:e.colors.contentSecondary,display:"flex",flexWrap:"wrap"}})),dt=(0,d.I4)("span",(t=>{let{$theme:e}=t;return{...e.typography.LabelSmall,lineHeight:"20px"}})),ut=(0,d.I4)("span",(t=>{let{$theme:e}=t;return{display:"flex",...e.typography.ParagraphSmall}})),ct=(0,d.I4)("p",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,marginBottom:e.sizing.scale300}})),mt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{display:"flex",flexDirection:"row",flex:1,padding:`${e.sizing.scale600} 0`}})),pt=(0,d.I4)(a.N_,(t=>{let{disabled:e,$isCartDrafting:i,$theme:r}=t;return{width:"100%",pointerEvents:e?"none":"auto",...i?{display:"flex",marginRight:r.sizing.scale600,minHeight:"112px"}:{}}})),It=(0,d.I4)("li",{width:"100%",paddingTop:"16px"}),_t=(0,d.I4)("div",{width:"100%",maxWidth:"100%",display:"flex"}),ht=(0,d.I4)("div",{flexGrow:1}),Tt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{...e.typography.LabelMedium,padding:0}})),At=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,color:e.colors.contentNegative}})),gt=(0,d.I4)("ul",(t=>{let{$theme:e}=t;return{marginTop:e.sizing.scale100,flexGrow:1}})),Ct=(0,d.I4)("div",{paddingLeft:"16px"}),Et=(0,d.I4)(p.A,(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{height:"72px",width:"72px"}:{height:"48px",width:"48px"},...i?{}:{outline:`1px solid ${e.colors.contentPrimary}08`},objectFit:"cover",outlineOffset:"-1px"}})),Ot=(0,d.I4)("div",(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{marginRight:e.sizing.scale600,marginTop:0,marginBottom:0,marginLeft:0}:{margin:e.sizing.scale600,alignItems:"flex-start"},width:"72px",minWidth:"72px",height:"72px",minHeight:"72px",display:"flex",justifyContent:"center",overflow:"hidden",borderRadius:e.borders.radius300}})),Nt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{display:"flex",justifyContent:"center",alignItems:"center"}})),yt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{minHeight:e.sizing.scale1600,display:"flex",alignItems:"center"}})),ft=(0,d.I4)("div",{display:"flex"}),Rt=(0,d.I4)(T.BM,{pointerEvents:"auto"}),St=(0,d.I4)("div",{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"center"}),Dt=(0,d.I4)("div",(t=>{let{$theme:e,$marginTop:i}=t;return{display:"flex",alignItems:"center",...i?{marginTop:e.sizing[i]}:null}})),Ut=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,color:e.colors.contentTertiary,marginLeft:e.sizing.scale300}})),Yt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{display:"flex",width:e.sizing.scale500,height:e.sizing.scale500}})),vt=(0,d.I4)("div",{display:"flex",alignItems:"center"}),Lt=(0,d.I4)("li",(t=>{let{$isLastItem:e,$theme:i,$isCartDrafting:r}=t;return{display:"flex",width:"100%",...e?{}:{borderBottom:`1px solid ${i.colors.borderOpaque}`},...r&&e?{marginBottom:`-${i.sizing.scale600}`}:{}}})),bt=(0,d.I4)("div",(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{paddingBottom:e.sizing.scale600,paddingTop:e.sizing.scale600}:{padding:e.sizing.scale600},flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:e.sizing.scale0}})),Bt=(0,d.I4)("div",{display:"flex",alignItems:"center",justifyContent:"center"}),Pt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{...e.typography.LabelSmall,borderRadius:e.borders.radius300,backgroundColor:e.colors.backgroundSecondary,padding:e.sizing.scale400,whiteSpace:"nowrap"}})),xt=(0,d.I4)("div",(t=>{let{$theme:e}=t;return{paddingTop:e.sizing.scale300}})),$t=(0,z.uq)(i(50510)),Ft=t=>{const e=(0,o.W6)(),{isBundledOrder:i}=(0,c.tC)();return t.isUnavailable&&i?(0,f.Y)(vt,{children:t.hasServerDrivenCartActions?(0,f.Y)(L,{disabled:t.disabled,cartItemActions:t.cmpCartItem?.cartItemActions,onRemove:t.onRemove,onReplace:()=>{e.push(t.backupItemsUrl)},onSchedule:t.onSchedule}):(0,f.Y)(Rt,{onClick:t.onRemove,disabled:t.disabled,children:(0,f.Y)(s.H,{id:"shared.remove"})})}):null},Mt=t=>{let{shoppingCartItem:e,cmpCartItem:i,storeItem:a,itemCustomizations:d,quantitySelectType:p,isCartDrafting:h,cartItemTags:T,isLiveOrder:C,setLiveOrderError:E,isLiveOrderCartLoading:N,...y}=t;const U=(0,l.zy)(),v=(0,o.W6)(),{uuid:B,shoppingCartItemUuid:$,title:F,specialInstructions:z,quantity:it,customizations:rt,imageURL:nt,storeUuid:Lt,sectionUuid:Mt,subsectionUuid:Gt,fulfillmentIssueAction:kt,itemQuantity:wt,pricedByUnit:Vt}=e,{isBundledOrder:zt,serverCart:Qt,draftOrderUUID:Wt}=(0,c.tC)(),{setOutOfItemsStateWithItemPayload:Ht,setInitialSpecialInstructions:qt}=(0,Q.A)(),Kt=(0,Z.A)(),{store:jt}=(0,k.Ay)(Lt),Xt=(0,I.i)(jt.data)?(0,f.Y)(s.H,{id:"shared.notes"}):(0,f.Y)(s.H,{id:"components.SpecialInstructions.text"}),Zt=jt?.data?.fulfillmentIssueOptions||y.fulfillmentIssueOptions,Jt=C?Zt:y.fulfillmentIssueOptions||jt?.data?.fulfillmentIssueOptions,te="cart-item-"+B,{data:ee}=function(t){let{storeUuid:e,sectionUuid:i,subsectionUuid:r,menuItemUuid:n}=t;return(0,V.HQ)((0,w.f)({itemRequestType:"ITEM",storeUuid:e,sectionUuid:i,subsectionUuid:r,menuItemUuid:n,diningMode:null},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:!0}}))}({storeUuid:Lt,sectionUuid:Mt,subsectionUuid:Gt,menuItemUuid:B}),ie=e.sellingOption??(0,O.bp)(a?.purchaseInfo?.purchaseOptions?.[0])??(0,O.F_)(ee?.purchaseInfo?.purchaseOptions?.[0]),re=(0,P.Yh)(),{isBillSplitOrder:ne,isDraftOrderCartLocked:ae,isDraftOrderParticipant:oe}=(0,x.A)(),le=Qt.data?.currencyCode||"",se=(0,K.A)({storeId:Lt,originalCurrencyCode:le}),{isInMulticart:de}=(0,M.A)(),ue=function(t){const{isLiveOrder:e,liveOrderUuid:i}=(0,et.G)(),r=(0,tt.u)({getCartFrom:"workflowId",workflowId:i});let n=g.R9.maybeFrom(t?.itemQuantity?.inSellableUnit?.value)?.toE5().toBaseDecimal();return!e||"SYNCING"!==r?.status&&"AVAILABLE"!==r?.status||(n=r?.rawCartData?.cartQuantities?.[t?.uuid]?.currentQuantity),n}(e),ce=(0,b.A)(),me=(0,at.F)(),pe=(0,ot.A)(),Ie=(0,Y.Ay)(),_e=Boolean(i?.singleCartItemWarnings?.find((t=>t.type===_.Cm.UNAVAILABLE)));r.useEffect((()=>{_e&&Ie("eats:cart_item_unavailable")}),[Ie,_e]);const he=(0,n.useCallback)((async t=>{C?me({type:"cart",num:t,skuUuid:B,cartItemUuid:$}).catch((t=>{"UPDATE_ITEMS_IN_CART_BOTTOM_SHEET"===t.name?E(t.payload[0]):pe()})):ce($,t)}),[$,ce,me,C,B,E,pe]),Te=(0,n.useCallback)((()=>he(0)),[he]),Ae=(0,q.A)("is_quantity_constraints_sot_override_enabled"),ge=Qt.isLoading||re.isLoading||Boolean(N),Ce=ne&&ae&&oe,Ee=(0,u.o42)(U,{storeUuid:Lt,itemUuid:B,storeSlug:jt?.data?.slug||"",sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid},"auto-replace-backup-item"),Oe=(0,J.mD)(jt?.data?.location?.locationType)?(0,u.oCM)(U,{storeUuid:Lt,itemUuid:$}):(0,u.QSN)(U,{itemUuid:$,draftOrderUUID:Wt}),Ne=Array.from(i?.cartItemActions||[]).length>0,ye="SUBSTITUTE_ITEM"===kt?.type,fe=kt?.itemSubstitutes,Re=Jt?.resolutionActions?.find((t=>t.action?.type===kt?.type)),Se=()=>{Ht({item:e,fulfillmentIssueOptions:Jt}),qt(e.specialInstructions)},De=(0,P.Ay)(),Ue=De?.checkoutPayloads?.cartItems?.cartItems?.find((t=>t.shoppingCartItemUUID===$)),Ye=Ae?(t=>t?.purchaseOption?.soldByUnit?.measurementType)(Ue??i):void 0,ve=Ae?(t=>t?.purchaseOption?.quantityConstraintsV2?{incrementNumber:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.increment??O.Bn.incrementQuantity).toFloat(),defaultQuantityNumber:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.defaultQuantity??O.Bn.defaultQuantity).toFloat(),minPermittedNumber:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.minPermitted??O.Bn.minimumQuantity).toFloat(),maxPermittedNumber:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.maxPermitted??O.Bn.maximumQuantity).toFloat(),increment:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.increment??O.Bn.incrementQuantity),defaultQuantity:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.defaultQuantity??O.Bn.defaultQuantity),minPermitted:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.minPermitted??O.Bn.minimumQuantity),maxPermitted:g.R9.from(t?.purchaseOption?.quantityConstraintsV2?.maxPermitted??O.Bn.maximumQuantity)}:void 0)(Ue??i):void 0,Le=(0,q.A)("price_items_by_weight")&&(0,O.OV)(a??e,Ye),be=_e?null:(0,f.Y)(Bt,{"data-test":`${te}-quantity-selector`,children:"picker"===p?(0,f.Y)(S.A,{item:a??e,itemUuid:B,disabled:ge||Ce,value:it,updateItemQuantity:he,decimalQuantity:ue,sellingOption:ie,itemQuantity:wt,pricedByUnit:Vt,isInCart:!0}):"stepper"===p?(0,f.Y)(R,{item:a??e,storeUuid:Lt,isLoading:ge,isDisabled:Ce,cartQuantity:it,decimalQuantity:ue,onUpdate:he,overridingMeasurementType:Ye,overrideQuantityConstraints:ve}):"none"===p?(0,f.Y)(Pt,{children:(()=>{const t=g.R9.from(ue??it);return Le?`${t.toFloat()} ${(0,O.$v)(a??e)||""}`:t.toFloat()})()}):null}),Be=()=>{Kt&&v.push((0,X.F)(U,{storeUuid:Lt,entryPoint:"multicart"}))},Pe=_e||zt?(0,f.Y)(vt,{children:Ne?(0,f.Y)(L,{disabled:ge||Ce,cartItemActions:i?.cartItemActions,onRemove:Te,onReplace:()=>{v.push(Ee)},onSchedule:Be}):(0,f.Y)(Rt,{onClick:Te,disabled:ge||Ce,children:(0,f.Y)(s.H,{id:"shared.remove"})})}):null,xe=()=>C&&!Re?null:ye&&fe||!Re?ye&&fe?(0,f.FD)(Dt,{children:[(0,f.Y)(Yt,{children:(0,f.Y)(G.A,{size:12,color:"contentTertiary"})}),(0,f.Y)(Ut,{children:fe[0]?.title})]}):null:(0,f.FD)(Dt,{children:[(0,f.Y)(Yt,{children:(0,f.Y)(G.A,{size:12,color:"contentTertiary"})}),(0,f.Y)(Ut,{children:Re.title})]});return de&&h?(0,f.FD)(r.Fragment,{children:[(0,f.FD)(pt,{$isCartDrafting:h,disabled:ge||Ce||_e,to:Oe,onClick:Se,"data-testid":te,children:[(0,f.Y)(Nt,{children:(0,f.Y)(Ot,{$isCartDrafting:h,children:(0,f.Y)(Et,{$isCartDrafting:h,src:nt||$t,alt:F,"aria-hidden":"true"})})}),(0,f.FD)(bt,{$isCartDrafting:h,children:[(0,f.Y)(Tt,{children:F}),i?.customizations?.map(((t,e)=>(0,f.Y)(ct,{children:(0,f.Y)(H.Ay,{text:t})},e))),C&&jt.isLoading?(0,f.Y)(lt.A,{width:"50%",height:"20px",animation:!0}):(0,f.Y)(xe,{}),z?(0,f.FD)(st,{children:[(0,f.FD)(dt,{children:[Xt,": "]}),(0,f.Y)(ut,{children:z})]}):null,T?.map(((t,e)=>(0,f.Y)("div",{children:(0,f.Y)(j.A,{tag:t})},e))),(0,f.Y)("div",{children:i?.singleCartItemWarnings?.map((t=>(0,f.Y)(At,{children:t.title},t.type)))}),(0,f.Y)("div",{children:(0,f.Y)(A.A,{shoppingCartItemUuid:$,cartItem:i})}),(0,f.Y)(Ft,{disabled:ge||Ce,cmpCartItem:i,onRemove:Te,backupItemsUrl:Ee,hasServerDrivenCartActions:Ne,isUnavailable:_e,onSchedule:Be})]})]}),be]}):de?(0,f.Y)(pt,{to:Oe,disabled:ge||Ce||_e,onClick:Se,children:(0,f.FD)(It,{"data-test":te,children:[(0,f.FD)(_t,{children:[(0,f.FD)(ht,{children:[(0,f.Y)(Tt,{children:F}),i?.singleCartItemWarnings?.map((t=>(0,f.Y)(At,{children:t.title},t.type))),(0,f.FD)(gt,{children:[i?.customizations?.map(((t,e)=>(0,f.Y)("div",{children:(0,f.Y)(H.Ay,{text:t},e)},e))),ye&&fe||!Re?null:(0,f.FD)(Dt,{$marginTop:"scale100",children:[(0,f.Y)(Yt,{children:(0,f.Y)(G.A,{size:12,color:"contentTertiary"})}),(0,f.Y)(Ut,{children:Re.title})]}),ye&&fe?(0,f.FD)(Dt,{$marginTop:"scale100",children:[(0,f.Y)(Yt,{children:(0,f.Y)(G.A,{size:12,color:"contentTertiary"})}),(0,f.Y)(Ut,{children:fe[0]?.title})]}):null,z?(0,f.FD)(st,{children:[(0,f.FD)(dt,{children:[Xt,": "]}),(0,f.Y)(ut,{children:z})]}):null]}),(0,f.Y)(xt,{children:T?.map(((t,e)=>(0,f.Y)("div",{children:(0,f.Y)(j.A,{tag:t})},e)))})]}),(0,f.Y)(Ct,{children:(0,f.Y)(Et,{src:nt||$t,alt:F})})]}),(0,f.FD)(yt,{children:[(0,f.FD)(ft,{onClick:t=>{t.stopPropagation(),t.preventDefault()},children:[_e?null:(0,f.FD)(f.FK,{children:[be,(0,f.Y)(m.VX,{})]}),Pe]}),(0,f.Y)(St,{children:(0,f.Y)(A.A,{shoppingCartItemUuid:$,cartItem:i})})]}),(0,f.Y)(W.A,{storeUuid:Lt,item:e,hideSpacer:!0})]})}):(0,f.FD)(mt,{"data-test":te,onClick:Se,children:[(0,f.Y)(S.A,{itemUuid:B,item:a,updateItemQuantity:he,disabled:ge||Ce,value:it,decimalQuantity:ue,sellingOption:ie,itemQuantity:wt,pricedByUnit:Vt,isInCart:!0}),(0,f.Y)(D.A,{itemUuid:B,storeUuid:Lt,isDisabled:ge||Ce,to:(0,u.QSN)(U,{itemUuid:$}),title:F,allCustomizations:rt,changedCustomizations:d||[],currencyCode:se,shoppingCartItemUuid:$,specialInstructions:z,imageUrl:nt,fulfillmentIssueAction:kt,fulfillmentIssueOptions:Jt}),(0,f.Y)(W.A,{storeUuid:Lt,item:e,hideSpacer:!0})]},$)},Gt=t=>{let{cmpCartItems:e,quantitySelectType:i="picker",fulfillmentIssueOptions:a,isCartDrafting:o,isLiveOrderCartLoading:l}=t;const{isLiveOrder:s,liveOrderUuid:d}=(0,et.G)(),{liveOrderStoreUuid:u}=(0,rt.A)(),[c,m]=r.useState(null),p=(0,tt.u)({getCartFrom:"workflowId",workflowId:d}),{currentUserCartItems:I,storeUuid:_}=(0,x.A)(),T=(0,n.useMemo)((()=>(0,nt.nF)(p)),[p]),A=s?T:I,g=(0,$.A)(u??_),C=(0,n.useMemo)((()=>(0,h.tu)(A)),[A]),E=(0,n.useMemo)((()=>(e||[]).reduce(((t,e)=>(t[e?.shoppingCartItemUUID||""]=e,t)),{})),[e]),O=(0,F.A)();(0,B.A)(O);const N=(0,n.useMemo)((()=>s?A?.filter((t=>Boolean(E[t.shoppingCartItemUuid])))??[]:void 0===e?A:A?.filter((t=>Boolean(E[t.shoppingCartItemUuid])))),[e,A,E,s]),y=t=>{m(t)};return(0,f.Y)("ul",{"data-testid":"cart-items-list",children:N?.map(((t,e)=>{const{shoppingCartItemUuid:r,uuid:n}=t,d=g[n]??void 0,u=E[r],p=e===N?.length-1,I=u?.cartItemTags;return(0,f.FD)(f.FK,{children:[c?(0,f.Y)(it.A,{orderValidationError:c,onClose:()=>m(null)}):null,(0,f.Y)(Lt,{$isLastItem:p,$isCartDrafting:o,children:(0,f.Y)(Mt,{shoppingCartItem:t,cmpCartItem:u,storeItem:d,itemCustomizations:C[r],quantitySelectType:i,fulfillmentIssueOptions:a,isCartDrafting:o,cartItemTags:I,isLiveOrder:s,setLiveOrderError:y,isLiveOrderCartLoading:l})},r)]})}))})}},46687:(t,e,i)=>{i.d(e,{l:()=>a});var r=i(32879),n=i(41908);const a=()=>{const{draftOrderUUID:t,isBundledOrder:e}=(0,n.tC)(),{validationErrors:i,checkoutPayloads:{cartItems:a}}=(0,r.Ay)(),o=i?.some((t=>"INVALID_BASKET"===t.type)),l=e?a?.cartItemsGroups?.find((e=>e.draftOrderUUID===t)):a,s=l?.cartItemsWarnings?.[0];return{isCartUnderMBS:Boolean(s||a?.cartItemsGroups?.some((t=>t.cartItemsWarnings?.length)))&&(o||e),cartWarning:s}}},57674:(t,e,i)=>{i.d(e,{A:()=>a});var r=i(83604),n=i(23977);const a=()=>{const{isLiveOrder:t,liveOrderUuid:e,storeUuid:i}=(0,n.G)(),a=(0,r.S)({cartType:"LIVE_ORDER",getCartFrom:"workflowId",workflowId:e,selector:t=>t.rawCartData?.liveOrder}),o=a?.cart?.shoppingCart?.items?.[0]?.storeUUID,l=a?.customer?.customerIdentifier?.restaurantUUID;return{isLiveOrder:t,liveOrderStoreUuid:l||o||i||""}}},62380:(t,e,i)=>{i.d(e,{T:()=>l});var r=i(76905),n=i(20796);const a=(0,r.I4)("hr",(t=>{const{$theme:e,$size:i=n.S.section}=t;return i===n.S.module?{borderTopWidth:e.sizing.scale100,borderTopColor:e.colors.borderOpaque,borderTopStyle:"solid",borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none"}:{borderTopWidth:"1px",borderTopColor:e.colors.borderOpaque,borderTopStyle:"solid",borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none"}}));a.displayName="StyledDivider";var o=i(40014);const l=(0,r.K6)(a,(t=>function(e){return(0,o.Y)(t,{"aria-hidden":"true",role:"separator",...e})}))},77977:(t,e,i)=>{i.d(e,{$b:()=>I,US:()=>A,Ww:()=>T,gG:()=>_,mK:()=>h,ro:()=>g});var r=i(41967),n=i(46687),a=i(50912),o=i(2693),l=i(12471),s=i(44580),d=i(40014);const u=(0,r.I4)("div",{display:"flex",alignItems:"center"}),c=(0,r.I4)("div",(t=>{let{$theme:e}=t;return{margin:"2px 0",color:e.colors.contentNegative,...e.typography.LabelMedium}})),m=(0,r.I4)("div",(t=>{let{$theme:e}=t;return{color:e.colors.contentSecondary,...e.typography.ParagraphSmall}})),p=(0,r.I4)("div",{margin:"0 16px"}),I=()=>{const{isCartUnderMBS:t,cartWarning:e}=(0,n.l)();return t&&e?e:null},_=t=>{let{warning:e}=t;return(0,d.FD)(u,{children:[(0,d.Y)(a.A,{color:"negative",size:24}),(0,d.Y)(o.Wv,{}),(0,d.FD)("div",{children:[(0,d.Y)(c,{children:e.title}),(0,d.Y)(m,{children:e.subtitle})]})]})},h=t=>{let{$spaceBefore:e}=t;const i=I();return i?(0,d.FD)(d.FK,{children:[(0,d.Y)(s.Ay,{$height:e}),(0,d.Y)(_,{warning:i}),(0,d.Y)(l.A,{$height:"1px",$margin:"16px 0 0"})]}):null},T=()=>{const t=I();return t?(0,d.FD)(d.FK,{children:[(0,d.Y)(l.A,{$height:"2px",$margin:"0"}),(0,d.FD)(p,{children:[(0,d.Y)(s.Ay,{$height:16}),(0,d.Y)(_,{warning:t}),(0,d.Y)(s.Ay,{$height:16})]})]}):null},A=()=>{const t=I();return t?(0,d.FD)(d.FK,{children:[(0,d.Y)(s.Ay,{$height:16}),(0,d.Y)(_,{warning:t}),(0,d.Y)(s.Ay,{$height:16}),(0,d.Y)(l.A,{$height:"1px",$margin:"0 0 0 40px"})]}):null},g=t=>{let{$spaceAfter:e}=t;const{cartWarning:i}=(0,n.l)();return i?(0,d.FD)(d.FK,{children:[(0,d.Y)(_,{warning:i}),e?(0,d.Y)(s.Ay,{$height:e}):null]}):null}},85694:(t,e,i)=>{i.d(e,{A:()=>T});var r=i(90417),n=i(40304),a=i(65416),o=i(27335),l=i(84183),s=i(70811),d=i(31725),u=i(51610),c=i(95987),m=i(8474),p=i(17923),I=i(91156),_=i(86105);const h={TOP_EATS_TAB:p.$k.ENTRY_POINT_XLB_TOP_EATS_TAB,NAVA_TILE:p.$k.ENTRY_POINT_XLB_NAVA_TILE,EMC_SEE_ALL:p.$k.ENTRY_POINT_EMC_SEE_ALL,EMC_MERCHANT:p.$k.ENTRY_POINT_EMC_MERCHANT,RING_GENERAL:p.$k.ENTRY_POINT_RING_GENERAL,RING_MERCHANT:p.$k.ENTRY_POINT_RING_MERCHANT},T=t=>{const{user:e}=(0,l.A)(),i=(0,_.W6)(),T=(0,a.d4)((t=>t.eatsCommsControl)),A=(0,d.A)("gratis"),g=(0,s.A)(),C=(0,c.A)(),E=(0,I.Ay)(),O=new URLSearchParams(i.location.search).get(m.Q71.xlbEntry),N=h[String(O||C?.get(m.Q71.xlbEntry))]||p.$k.ENTRY_POINT_INVALID,y=`gratis_${N}_${t}`,f=(0,n.vm)({...u.Y.membership_preview_enabled,defaultValue:!1}),R=A&&e.data?.isLoggedIn&&!g,S=t===p.Zn.LAST_ACTION_BROWSE_HOME_PAGE?R&&!T.isLoading&&!T.hasLoaded&&!T.error:R&&"true"!==C?.get(y)&&f,D=(0,o.A)("checkAndUpdateGratisV1"),U=(0,r.useCallback)((()=>{C?.set(y,"true"),E("eats:home_membership_modal_trigger",{entryPoint:N,lastAction:t}),D({entryPoint:N,lastAction:t})}),[D,N,t,C,y,E]);return(0,r.useEffect)((()=>{t!==p.Zn.LAST_ACTION_ADD_TO_CART&&S&&U()}),[S,U,t]),{shouldCheckAndUpdateGratis:S,checkAndUpdateGratis:U}}},92208:(t,e,i)=>{i.d(e,{Oz:()=>n,nF:()=>r});const r=t=>{const e=(t=>"LOADING"!==t.status&&"OUTDATED"!==t.status?t.rawCartData?.liveOrder:null)(t),i=e?.cart?.shoppingCart?.items;return i?i?.map((t=>{const{editableConsumerSpecification:e}=t?.fulfillmentContext?.fulfillmentState?.pending?.currentModifications?.structuredModification||{};return{uuid:t?.skuUUID||"",customizations:{},shoppingCartItemUuid:t?.shoppingCartItemUUID||"",price:0,customItemInfo:null,title:t?.title||"",sectionUuid:t?.sectionUUID||"",quantity:t?.quantity||0,storeUuid:t?.storeUUID||"",subsectionUuid:t?.subsectionUUID||"",specialInstructions:t?.specialInstructions||"",consumerUuid:t?.consumerUUID||"",...t?.fulfillmentIssueAction?{fulfillmentIssueAction:t?.fulfillmentIssueAction}:null,createdTimestamp:Number(t?.createdTimestamp)||0,imageURL:t?.imageURL||"",pricedByUnit:t?.pricedByUnit,itemQuantity:t?.itemQuantity||null,sellingOption:null,numAlcoholicItems:t?.numAlcoholicItems,itemId:t?.itemID,...e}})):null},n=t=>Boolean(t?.items?.find((t=>t?.fulfillmentContext?.fulfillmentState?.pending?.currentModifications)))}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/web-eats-v2/client-66068-7f6b28464d880ad0.js.map