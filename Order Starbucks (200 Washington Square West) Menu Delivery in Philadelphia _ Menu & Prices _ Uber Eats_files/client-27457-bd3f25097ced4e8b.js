(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[16579,16719,19187,27457,28964,37117,41568,59936,89839,96806],{917:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(90417),i=r(65416),s=r(84167),a=r(52111),o=r(16439);function l(){const e=(0,o.A)(),t=(0,i.d4)((e=>{let{embeddedFeatures:t}=e;return t})),r=(0,n.useContext)(s.nW),l=(0,a.A)("emitXlbHomeFeedEventV1");return(0,n.useCallback)((n=>{let{source:i}=n;if(!e)return;let s=!0;if(t.prefetch){r.set(`uev2.xlb_${i}_impression`,"true");const e=r.get("uev2.xlb_feed_loaded_impression"),t=r.get("uev2.xlb_user_triggered_impression");s=e&&t}s&&l()}),[e,t.prefetch,r,l])}},8330:(e,t,r)=>{"use strict";r.d(t,{KT:()=>f,Lq:()=>m,Q1:()=>_});var n=r(90417),i=r(84167),s=r(66433),a=r(84183),o=r(91156),l=r(41519),c=r(16439),d=r(93116),u=r(40304),h=r(33010);var p=r(31010),g=r(12615);const f="membershipPreviewState",m={SIGNED_UP_FROM_HERO:"signed_up_from_hero",GUIDELINES_VIEWED:"guidelines_viewed"},_=()=>{const{user:e}=(0,a.A)(),t=(0,i.Fo)(),r=(0,l.A)(),_=(0,c.A)(),y=(0,s.k)(),v=(0,o.Ay)(),b=(0,d.G)(),A=(0,p.A)(),C=(0,g.A)(),S="US"===C?.addressComponents?.countryCode,x=(0,n.useMemo)((()=>!e.isLoading&&S&&Boolean(e.data)&&!e.data?.isLoggedIn&&!r&&!_&&!y.isGoogleBot&&b&&A),[e,r,_,y,b,A,S]),w=(e=>{const t=(0,u.KU)(),r=(0,o.eh)(),[i,s]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(e){r("eats:membership_preview_hero_xp_inclusion_event");const e=t.getBoolean(h.w.membership_preview_hero_guest_feed);s(e),r("eats:membership_preview_hero_xp_parameter_value",{parameterValue:e})}}),[r,t,e]),i})(x);(0,n.useEffect)((()=>{w?v("eats:membership_preview_hero_enabled"):x&&v("eats:membership_preview_hero_returned_false")}),[w,v,x]);return{isEnabled:x&&w,handleHeroSignupBeforeClick:()=>{v("eats:membership_preview_hero_authentication_triggered"),t.set(f,m.SIGNED_UP_FROM_HERO)},handleHeroTermsApplyClick:()=>{v("eats:membership_preview_hero_terms_apply_click")}}}},10048:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var n=r(79193),i=r(90417),s=r(16616),a=r(50371),o=r(16439),l=r(97684);const c=e=>{const t=(0,o.A)(),r=(0,i.useCallback)((t=>{const r=function(e){if(e&&"object"==typeof e&&"string"==typeof e.type){const t=e.payload;return{type:e.type,payload:t&&"object"==typeof t?(0,l.X)(t).reduce(((e,r)=>(e[r]=t[r],e)),{}):null}}return null}(t?.data),n=t?.origin;return!!r&&e(r,n)}),[e]);(0,i.useEffect)((()=>{if(t&&n.A)return n.A.addEventListener("message",r),()=>{n.A&&n.A.removeEventListener("message",r)}}),[t,r])};var d=r(92448),u=r(917),h=r(27559),p=r(93916),g=r(8474),f=r(71715),m=r(80482),_=r(86105),y=r(56554),v=r(42989),b=r(74225),A=r(12741);var C=r(21251),S=r(41679),x=r(8301),w=r(5527),E=r(91156),I=r(32879),k=r(78644),O=r(31725),D=r(89784),T=r(89831);const R=()=>{const e=(0,T.wA)(),t=(0,E.Ay)();return{setXlbSelectedProfile:r=>{t("eats:xlb_selected_profile_received",{profileUUID:r?.profileUUID,profileType:r?.profileType,profileSource:r?.profileSource}),e((0,D.xd)({profileUUID:r?.profileUUID||null,profileType:r?.profileType||null,profileSource:r?.profileSource||null}))}}};var $=r(40304),L=r(33006),M=r(81896),H=r(97082),P=r(33010);var B=r(28679);const z="BACK_TO_FEED",N="BACK_TO_FEED_CLEARING_HISTORY",Y="HELP",U="ACCOUNT",F="SHOPPING_CART",V="STORE_OVERFLOW",G="SEARCH",j=()=>{const e=(0,a.W6)(),t=(0,d.A)(),r=(0,_.zy)(),o=(0,u.A)(),{totalOrders:l}=(0,f.A)(),{hydrateDelegatedBooking:D,isDelegatedBooking:T}=(0,y.G)(),j=(0,B.A)(),q=(0,s.A)({page:"order"}),K=(0,g.Zyy)(r,"storeOverflowActions"),Q=(0,g.wQy)(r),{toggleIsOpen:W}=(0,p.r2)(),X=function(e){const t=(0,A.A)("setLocationDetailsWithAddressV1");return(0,b.useMutation)((e=>t.request("setLocationDetailsWithAddressV1",e)),e)}(),{saveChanges:Z}=(0,S.tC)(),J=(0,E.Ay)(),{dataKey:ee}=(0,I.gX)(),te=(0,b.useQueryClient)(),re=(0,g.qAk)(r),[ne,ie]=(0,k.A)("orchid.address",null),se=(0,O.A)("orchid_omit_city_in_lookup"),{setXlbSelectedProfile:ae}=R(),oe=(0,$.vm)({...M.P.xlb_launch_deeplink_bridge_event_enabled,defaultValue:!1}),le=(0,$.Ab)({...P.w.xlb_feed_deeplink_url,defaultValue:"uber://ubereats"}),ce=(0,H.j)(),de=(0,L.s)();return c((0,i.useCallback)(((i,s)=>{if(!T||v.sM.find((e=>e.test(s)))){if("CUSTOM_HEADER_ACTION"===i.type){const s=i.payload;if(s?.action===z)e.push(t);else if(s?.action===N)if(J("eats:navigation_back_to_feed_tap",{journeyPluginName:de}),oe){const e=(0,g.Nel)({location:r,path:le,persistentQueryParams:["savingsId","savingsCtaType"]}),t=(0,g.GF3)(e);ce(t)}else e.push(t);else if(s?.action===Y)j?e.push((0,g.Zyy)(r,"cvsHelp")):(0,m.A)(q);else if(s?.action===U)W();else if(s?.action===G)e.push(Q);else if(s?.action===F){if(!n.A)return;l<=1?e.push((0,g._Bq)(n.A.location)):(0,g.hr0)(n.A.location,"multicartMobileSwitcher")?e.replace((0,g.Hwd)(n.A.location)):e.push((0,g.Zyy)(n.A.location,"multicartMobileSwitcher"))}else s?.action===V&&e.push(K)}else v.s9.includes(i.type)&&D(i.payload,s);if("USER_TRIGGERED_IMPRESSION"===i.type&&((0,h.I7)(),o({source:"user_triggered"})),"SEARCH_RESULTS"===i.type){const t=i.payload?.q;"string"==typeof t&&t.length>0&&e.push((0,g.EfF)(r,{userQuery:t}))}if("EMBEDDING_APP_ADDRESS_UPDATE"===i.type||"ORCHID_ADDRESS_UPDATE"===i.type){const t=i.payload,n="door_to_door",s="leave_at_door";t&&X.mutate({latitude:t.coordinates.latitude,longitude:t.coordinates.longitude,address:(0,w.w4)(t,{omitCity:se}),sourceAddress:t},{onSuccess:i=>{J("orchid:bridge_address_update_success",{eatsAddress:i?.address,orchidAddress:t});const a=t.unattendedDelivery?s:n;(0,w.jo)(i)&&ie(t),Z((()=>{const t=x.parse(r.search||"");(t[g.Q71.place]||t[g.Q71.latitude]||t[g.Q71.longitude])&&e.replace((0,g.Nel)({location:r,newQueryParams:{place:(0,C.Yv)((0,C.cz)(i))}}))}),{overrideLocationDraft:i,overrideDraftInstructions:{aptOrSuite:t.apartmentNumber??"",...null!=t.unattendedDelivery&&{interactionType:a},...t.instructions?{notes:t.instructions}:{}},skipLocationUpsert:(0,w.jo)(i)}).catch((e=>{J("orchid:bridge_address_update_failure",{error:e})}))},onError:t=>{J("orchid:bridge_address_update_failure",{error:t}),e.replace(re)}})}if("EMBEDDING_APP_NAVIGATION_REQUEST"===i.type){const t=i.payload;t?.url&&t?.method&&e[t.method](t.url)}if("SELECTED_PROFILE"===i.type&&ae(i.payload),"RELOAD_CHECKOUT"===i.type){const t=(0,g.hr0)(r,"orderValidationError");te.invalidateQueries(ee),t&&e.replace((0,g.Hwd)(r))}}}),[e,t,q,Q,W,l,K,o,T,D,r,X,Z,J,te,ee,re,ie,se,ae,oe,de,ce,le,j])),null}},11570:(e,t,r)=>{var n="__lodash_hash_undefined__",i="[object Function]",s="[object GeneratorFunction]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,l=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,p="object"==typeof self&&self&&self.Object===Object&&self,g=h||p||Function("return this")();var f=Array.prototype,m=Function.prototype,_=Object.prototype,y=g["__core-js_shared__"],v=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),b=m.toString,A=_.hasOwnProperty,C=_.toString,S=RegExp("^"+b.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=g.Symbol,w=f.splice,E=P(g,"Map"),I=P(Object,"create"),k=x?x.prototype:void 0,O=k?k.toString:void 0;function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function T(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function R(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $(e,t){for(var r=e.length;r--;)if(Y(e[r][0],t))return r;return-1}function L(e,t){t=function(e,t){if(U(e))return!1;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||V(e))return!0;return o.test(e)||!a.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return U(e)?e:B(e)}(t);for(var r=0,n=t.length;null!=e&&r<n;)e=e[z(t[r++])];return r&&r==n?e:void 0}function M(e){if(!F(e)||function(e){return!!v&&v in e}(e))return!1;var t=function(e){var t=F(e)?C.call(e):"";return t==i||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?S:u;return t.test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function H(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function P(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return M(r)?r:void 0}D.prototype.clear=function(){this.__data__=I?I(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(I){var r=t[e];return r===n?void 0:r}return A.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:A.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?n:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,r=$(t,e);return!(r<0)&&(r==t.length-1?t.pop():w.call(t,r,1),!0)},T.prototype.get=function(e){var t=this.__data__,r=$(t,e);return r<0?void 0:t[r][1]},T.prototype.has=function(e){return $(this.__data__,e)>-1},T.prototype.set=function(e,t){var r=this.__data__,n=$(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},R.prototype.clear=function(){this.__data__={hash:new D,map:new(E||T),string:new D}},R.prototype.delete=function(e){return H(this,e).delete(e)},R.prototype.get=function(e){return H(this,e).get(e)},R.prototype.has=function(e){return H(this,e).has(e)},R.prototype.set=function(e,t){return H(this,e).set(e,t),this};var B=N((function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(V(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e);var t=[];return l.test(e)&&t.push(""),e.replace(c,(function(e,r,n,i){t.push(n?i.replace(d,"$1"):r||e)})),t}));function z(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function N(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return r.cache=s.set(i,a),a};return r.cache=new(N.Cache||R),r}function Y(e,t){return e===t||e!=e&&t!=t}N.Cache=R;var U=Array.isArray;function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function V(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==C.call(e)}e.exports=function(e,t,r){var n=null==e?void 0:L(e,t);return void 0===n?r:n}},13555:(e,t,r)=>{"use strict";r.d(t,{u:()=>h});var n=r(90417),i=r(40304),s=r(86105),a=r(95987),o=r(8474),l=r(88280),c=r(57806),d=r(5592);const u="offPlatformParams";function h(){const e=(0,i.vm)({...l.A.ads_off_platform_attribution_enabled,defaultValue:!1}),t=(0,i.Ab)({...l.A.ads_off_platform_attribution_url_patterns,defaultValue:""}),r=(0,s.W6)(),h=(0,a.A)(),p=(0,c.Ie)(),g=(0,n.useMemo)((()=>function(e){if(!e)return[];return e.split(",").map((e=>e.trim())).filter(Boolean)}(t)),[t]),f=r.location.pathname,m=r.location.search||"",_=(0,n.useMemo)((()=>e&&function(e,t){if(!t.length||!e)return!1;return t.some((t=>{try{return new RegExp(t).test(e)}catch{return!1}}))}(f||"",g)?function(e){const t=(0,o.eAM)(e,["googleClickId","metaClickId","referrer","utmCampaign","utmContent","utmSource"]),r=t.googleClickId,n=t.metaClickId,i=t.referrer,s=i?.split("singular_click_id=")[1],a=t.utmCampaign,l=t.utmContent,c=t.utmSource;if(!function(e){let{gclid:t,fbclid:r,referrer:n,utmCampaign:i,utmContent:s,utmSource:a}=e;return Boolean(t||r||n?.includes("singular_click_id=")||i||s||a)}({gclid:r,fbclid:n,referrer:i,utmCampaign:a,utmContent:l,utmSource:c}))return null;if(!r&&!n&&!s||!l)return null;return{...r?{gclid:r}:{},...n?{fbclid:n}:{},...s?{singularClickId:s}:{},...a?{utmCampaign:a}:{},...l?{utmContent:l}:{},...c?{utmSource:c}:{}}}(m):null),[e,f,m,g]),y=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=_?JSON.stringify(_):null;y.current!==e&&Boolean(_)&&(h&&h.set(u,JSON.stringify(_)),p("ads:ads_click",{adsAnalyticsEvent:{adEventType:d.S.CLICK,adImpressionUUID:"",analyticsLabel:"off-platform-ad-attribution",adData:"",clientDataMap:_}})),y.current=e}),[e,_,h,p])}},17172:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(86105),i=r(26619),s=r(8474),a=r(53985),o=r(40014);const l=()=>{const e=(0,n.zy)();return(0,o.Y)(i.Ay,{backLocation:(0,s.aUB)(e),children:(0,o.Y)(a.A,{})})}},26258:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(90417),i=r(63204),s=r(11752),a=r(73077);const o="uev2.messaging-interstitial-session-capper";function l(){const e=(0,s.A)(),t=(0,a.mF)(e),r=(0,i.Mj)(),l=(0,n.useCallback)((()=>r.get(o)||{}),[r]);return{getEaterMessageInterstitialSessionCapper:(0,n.useCallback)(((e,r)=>{const n=l()[e];return n?.sessionId===t&&(n?.campaigns||[]).includes(r)}),[l,t]),setEaterMessageInterstitialSessionCapper:(0,n.useCallback)(((e,n)=>{const i=l(),s=i[e],a=s?.sessionId===t&&s?.campaigns?s.campaigns:[];a.includes(n)||a.push(n),i[e]={sessionId:t||"",campaigns:a},r.set(o,i)}),[r,t,l])}}},26619:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>C,Es:()=>A,R4:()=>b});var n=r(90417),i=r(41967),s=r(38622),a=r(63281),o=r(39182),l=r(86105),c=r(64825),d=r(8474),u=r(21725),h=r(65416),p=r(38448),g=r(7946),f=r(91106),m=r(40014);const _=(0,i.I4)("div",(e=>{let{$theme:t,$overlay:r,$takeOverModal:n}=e;return{display:"flex",flexDirection:"column",flex:1,background:t.colors.backgroundPrimary,maxWidth:"100%",height:"100%",position:"relative",zIndex:n?o.IQ.base:o.IQ.modal,...r?{position:"absolute",top:0,width:"100%"}:{}}})),y=(0,i.I4)("div",(e=>({position:e.$isStuck?"sticky":"relative",zIndex:o.IQ.modal,top:0}))),v=(0,i.I4)("div",(e=>({padding:e.$removeTopPadding?"12px 16px 0 16px":"64px 16px 0 16px",height:"100%",boxSizing:"border-box"}))),b=(0,i.K6)(v,(e=>function(t){const r=(0,h.d4)((e=>{let{embeddedFeatures:t}=e;return t})).xlbHeaderBridge,{children:n,...i}=t;return(0,m.Y)(e,{$removeTopPadding:r,...i,children:n})})),A=s.A,C=e=>{const t=(0,l.zy)(),r=(0,c.A)(),i=n.useContext(f.W),{backLocation:s=(0,d.aMT)(t),hasBackButton:o,hasCloseButton:v=!0,inverseColor:b=!1,isHeaderStatic:A,stickyBanner:C,onClose:S=()=>r(s),isTakeOverModal:x,isSecondaryCloseButton:w=!1}=e,{elementRef:E,isStuck:I}=(0,u.A)(),k=(0,h.d4)((e=>{let{embeddedFeatures:t}=e;return t})).xlbHeaderBridge;return(0,m.FD)(_,{$overlay:e.overlay,$takeOverModal:i?.isTakeOverModal??x,"data-test":e.dataTest??"mobile-dialog",children:[C?(0,m.Y)(y,{$isStuck:I,children:(0,m.Y)(C,{})}):null,(0,m.Y)(g.A,{children:(0,m.Y)(p.A,{})}),(0,m.Y)(a.A,{headerRef:E,hasBackButton:o,hasCloseButton:v,onClose:S,isSecondaryCloseButton:w,hideHeader:!0,inverseColor:b,isStuck:!k&&I,title:e.title,topRightIconButton:e.topRightIconButton,isHeaderStatic:A,hasShadow:e.headerHasShadow}),e.children]})}},30184:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var n=r(40304),i=r(33010),s=r(86105),a=r(30621),o=r(12615);const l=()=>{const e=(0,s.W6)(),t=(0,o.A)(),r=(0,n.vm)({...i.w.uk_dmcc_disclaimers,defaultValue:!1}),l=(0,a.aE)(e.location),c=t?.addressComponents?.countryCode;return r&&("GB"===l||"GB"===c)}},33006:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(90417),i=r(95987);const s=()=>{const e=(0,i.A)();return(0,n.useMemo)((()=>{const t=e?.get("journeyPluginName");return t?String(t):""}),[e])}},33435:(e,t,r)=>{"use strict";function n(e){if(!e||"object"!=typeof e)return null;const t=function(e){const{priority:t,seq:r,uuid:n}=e;if(!t||!r||!n)return null;return{priority:t,seq:r,uuid:n}}(e);if(!t)return null;switch(e.type){case"eater_menu_actions":return{type:"eater_menu_actions",...t,msg:e.msg||{}};case"chat":return{type:"chat",...t,msg:e.msg||{}};case"eater_message_service_screen_messages":return{type:"eater_message_service_screen_messages",...t,msg:e.msg||{}};case"home_membership_modal":return{type:"home_membership_modal",...t,msg:e.msg||{}};case"push_web_eats_verification_result":return{type:"push_web_eats_verification_result",...t,msg:e.msg||{}};case"eater_draft_order":return{type:"eater_draft_order",...t,msg:e.msg||{}};case"eater_order_entity":return{type:"eater_order_entity",...t,msg:e.msg||{}};case"eater_all_order_entities":return{type:"eater_all_order_entities",...t,msg:e.msg||{}};default:return null}}r.d(t,{U:()=>n})},34537:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(84183),i=r(90417),s=r(74225),a=r(24727),o=r(12741);function l(){const{user:e}=(0,n.A)(),t=e.data?.isLoggedIn||!1,{data:r,isLoading:l,error:c,isFetchingNextPage:d,fetchNextPage:u,hasNextPage:h,isSuccess:p,isError:g,refetch:f}=function(e){const t=(0,o.A)("getPastOrdersV1"),r=(0,a.n)("getPastOrdersV1",e.getInitialRequestArguments());return(0,s.useInfiniteQuery)({queryKey:r,queryFn:e=>{let{pageParam:r,queryKey:n}=e;return t.request("getPastOrdersV1",r||n[1])},enabled:e.enabled,getNextPageParam:e.getNextPageParam})}({enabled:t,getNextPageParam:e=>e.orderUuids&&0!==e.orderUuids.length&&!1!==e.meta.hasMore?{lastWorkflowUUID:e.orderUuids[e.orderUuids.length-1]}:null,getInitialRequestArguments:()=>({lastWorkflowUUID:""})});return{pastOrders:{data:(0,i.useMemo)((()=>{if(r&&r.pages)return r.pages.flatMap((e=>e.orderUuids.map((t=>e.ordersMap[t]))))}),[r]),isLoading:l,error:c,hasLoaded:Boolean(p||g)},isFetchingMore:Boolean(d),fetchMore:()=>{u()},canFetchMore:Boolean(h),refetch:f}}},38622:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(41967),i=r(39182),s=r(40014);const a=(0,n.I4)("div",{height:"112px"}),o=(0,n.I4)("div",(e=>{let{$theme:t,$padding:r}=e;return{padding:r,position:"fixed",bottom:0,left:0,right:0,zIndex:i.IQ.cover,...t.overlays.floatingButtonGradient}}));function l(e){return(0,s.FD)("div",{children:[(0,s.Y)(a,{}),(0,s.Y)(o,{$padding:e.overrides?.padding??i.Jk,children:e.children})]})}},41568:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var n=r(90417),i=r(23933),s=r(14169);const a=()=>{const{getQueueFromCache:e}=(0,i.B_)(),t=(0,s.v)();return{notifyExternalSyncToCart:(0,n.useCallback)((r=>{let{storeId:n,cartId:i}=r;if(!t)return;e({type:"storeId",storeId:n}).notifyExternalChanges({type:"cartUpdated",draftOrderId:i})}),[t,e]),notifyDiscardedOrder:(0,n.useCallback)((r=>{let{storeId:n}=r;if(!t)return;e({type:"storeId",storeId:n}).notifyExternalChanges({type:"cartDiscarded"})}),[t,e]),notifyOrderCompleted:(0,n.useCallback)((r=>{let{storeId:n}=r;if(!t)return;e({type:"storeId",storeId:n}).notifyExternalChanges({type:"cartOrdered"})}),[t,e])}}},42061:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(41967),i=r(11873);const s=(0,n.I4)("button",(e=>{let{$theme:t,radius:r}=e;return{...(0,i.A)({$theme:t,radius:r}),textDecoration:"none",":active":{background:t.colors.backgroundSecondary}}}))},48516:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(40304),i=r(1139);const s=()=>(0,n.vm)({...i.z.is_repeat_group_order_enabled,defaultValue:!1})},60756:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(41967),i=r(2693),s=r(39182),a=r(40014);const o=(0,n.I4)("div",(e=>{let{$reverse:t}=e;return{display:"flex",position:"relative",flexDirection:t?"row-reverse":"row"}})),l=(0,n.I4)("input",(e=>{let{$theme:t,checked:r}=e;return{position:"absolute",opacity:0,pointerEvents:"none",outline:"none",":focus[data-focus-visible-added]+label:before":{...r?{boxShadow:`0 0 0 2px ${t.colors.focus}`}:{border:`solid 3px ${t.colors.borderSelected}`}}}})),c=e=>encodeURIComponent(`\n  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0V20H20V0H0ZM8.5 15.1L2.90002 9.5L5 7.39999L8.40002 10.8L14.8 4.39999L16.9 6.5L8.5 15.1Z" fill="${e}" />\n  </svg>\n  `),d=(0,n.I4)("label",(e=>{let{$checked:t,$disabled:r,$reverse:n,$theme:i,$labelAlignLeft:a}=e;return{...i.typography.LabelMedium,width:"100%",display:"flex",boxSizing:"border-box",alignItems:"center",flexDirection:n?"row-reverse":"row",justifyContent:a?"flex-start":"space-between",cursor:"pointer",fontSize:"16px",lineHeight:"20px",transition:"background-color 100ms ease 0s",":before":{flex:"none",display:"flex",boxSizing:"border-box",border:r?`solid 3px ${i.colors.disabled}`:`solid 3px ${i.colors.tickBorder}`,...t?{border:"0",backgroundColor:i.colors.tickMarkFill,backgroundImage:`url('data:image/svg+xml,${c(i.colors.tickFillSelected)}');`,backgroundPosition:"center center",backgroundSize:"cover"}:{},content:"''",cursor:"pointer",height:s.kb,width:s.kb,verticalAlign:"middle"}}})),u=e=>(0,a.FD)(o,{$reverse:Boolean(e.reverse),children:[e.startElement,(0,a.Y)(l,{type:"checkbox",id:e.id,name:e.name,value:e.value,checked:e.isChecked,disabled:Boolean(e.isDisabled),onChange:e.onChange}),(0,a.FD)(d,{htmlFor:e.id,$disabled:Boolean(e.isDisabled),$reverse:e.reverse,$checked:e.isChecked,$labelAlignLeft:e.labelAlignLeft,children:[(0,a.Y)(i.Ay,{$width:"16px"}),e.children]})]})},62248:(e,t,r)=>{"use strict";r.d(t,{C:()=>d});var n=r(74225),i=r(40304),s=r(12741),a=r(11752),o=r(73077),l=r(84183),c=r(4420);const d=()=>{const{user:e}=(0,l.A)(),t=e.data?.isLoggedIn,r=(0,a.A)(),d=(0,o.bf)(r),u=(0,s.A)("getComplianceAds"),h=(0,i.vm)({...c.e.eats_web_gdpr_consent_modal,defaultValue:!1}),p=t&&h&&!d,{data:g}=(0,n.useQuery)("getComplianceAds",(()=>u.request("getComplianceAds",null)),{enabled:p});return!!t&&(!!h&&(!d&&g?.value))}},62461:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(40304),i=r(81896);const s=()=>{const e={...i.P.store_precheckout_bundling,defaultValue:!1},t={...i.P.eats_web_store_pcb_be_driven_limit_reached,defaultValue:!1};return{isStorePrecheckoutBundlingEnabled:(0,n.vm)(e),isBeDrivenLimitReachedDialogEnabled:(0,n.vm)(t)}}},68398:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r("__fusion__95b4ba69e5"),i=r(41967),s=r(44580),a=r(18297),o=r(40014);const l=e=>({body1:{fontSize:e.typography.ParagraphXSmall.fontSize,lineHeight:e.typography.ParagraphXSmall.lineHeight},body2:{fontSize:e.typography.ParagraphSmall.fontSize,lineHeight:e.typography.ParagraphSmall.lineHeight},body3:{fontSize:e.typography.ParagraphMedium.fontSize,lineHeight:e.typography.ParagraphMedium.lineHeight},title1:{fontSize:e.typography.ParagraphLarge.fontSize,lineHeight:e.typography.ParagraphLarge.lineHeight},title2:{fontSize:e.typography.HeadingXSmall.fontSize,lineHeight:e.typography.HeadingXSmall.lineHeight},title3:{fontSize:e.typography.HeadingSmall.fontSize,lineHeight:e.typography.HeadingSmall.lineHeight},title4:{fontSize:e.typography.HeadingMedium.fontSize,lineHeight:e.typography.HeadingMedium.lineHeight},title5:{fontSize:"44px",lineHeight:"52px"},title6:{fontSize:"48px",lineHeight:"56px"}}),c=(e,t,r)=>({...t?{fontFamily:"medium"===t?e.typography.LabelMedium.fontFamily:e.typography.ParagraphMedium.fontFamily}:null,...r?l(e)[r]:null}),d=(0,i.I4)("div",{display:"table"}),u=(0,i.I4)("img",{verticalAlign:"middle"}),h=(0,i.I4)("span",(e=>{let{$color:t,$fontSize:r,$fontStyle:n,$textDecoration:i,$theme:s}=e;return{...c(s,n,r),...t?{color:t in s.colors?s.colors[t]:t}:null,...i?{textDecoration:i}:null,verticalAlign:"middle"}})),p=(0,i.I4)("a",(e=>{let{$color:t,$fontSize:r,$fontStyle:n,$theme:i}=e;return{...(0,a.iV)({$theme:i}),...c(i,n,r),verticalAlign:"middle",...t?{color:t in i.colors?i.colors[t]:t}:{}}}));function g(e){return(0,o.Y)(o.FK,{children:e.lines.map(((t,r)=>(0,o.FD)(n.Fragment,{children:[(0,o.Y)(d,{children:t.children.map(((e,t)=>"img"===e.type?(0,o.Y)(u,{width:e.width,height:e.height,src:e.url},t):"text"===e.type?(0,o.Y)(h,{...e.$as?{$as:e.$as}:null,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,$textDecoration:e.textDecoration,children:e.text},t):"anchor"===e.type?(0,o.Y)(p,{href:e.href,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,children:e.text},t):null))}),"paragraph"===t.breakStyle&&r!==e.lines.length-1?(0,o.Y)(s.Ay,{$height:16}):null,"heading"===t.breakStyle?(0,o.Y)(s.Ay,{$height:8}):null]},r)))})}},68926:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(31725),i=r(66433),s=r(18789);const a=()=>{const e=(0,s.A)(),t=(0,n.A)("checkout_upsell_jarring_fix_enabled"),{isMobile:r}=(0,i.k)();return e&&t&&r}},69460:(e,t,r)=>{"use strict";r.d(t,{Ox:()=>s,kw:()=>i});var n=r(44743);const i={messageID:"close-webview",type:"presidioWebviewDismiss"},s=(0,n.A)({CART_UPDATE:null})},69542:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(40304),i=r(1139);const s=()=>(0,n.vm)({...i.z.scheduled_order_editing,defaultValue:!1})},71435:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n=r(90417),i=r(449),s=r(60276),a=r(49728),o=r(87893),l=r(65926),c=r(73569),d=r(10806),u=r(76905),h=r(92665);const p=(e,t)=>{const r={top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(e){case h.El.topLeft:return{...r,top:t,left:t};case h.El.topCenter:return{...r,top:t,left:"50%",transform:"translateX(-50%)"};case h.El.topRight:return{...r,top:t,right:t};case h.El.bottomLeft:return{...r,bottom:t,left:t};case h.El.bottomCenter:return{...r,bottom:t,left:"50%",transform:"translateX(-50%)"};case h.El.bottomRight:return{...r,bottom:t,right:t};case h.El.center:return{...r,top:"50%",left:"50%",transform:"translate(-50%, -50%)"};default:return r}},g=e=>{const t={[h.El.topLeft]:["translateY(16px)","translateY(0px)"],[h.El.topCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[h.El.topRight]:["translateY(16px)","translateY(0px)"],[h.El.bottomLeft]:["translateY(16px)","translateY(0px)"],[h.El.bottomCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[h.El.bottomRight]:["translateY(16px)","translateY(0px)"],[h.El.center]:["translateX(-50%) translateY(calc(-50% + 16px))","translateX(-50%) translateY(-50%)"]};return{animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",animationName:{from:{opacity:0,transform:t[e][0]},to:{opacity:1,transform:t[e][1]}}}},f={[h.SK.xSmall]:"480px",[h.SK.small]:"640px",[h.SK.medium]:"800px",[h.SK.large]:"100%"},m=(0,u.I4)("div",(e=>{let{$theme:t,$size:r,$placement:n=h.El.center}=e;const i="16px",s="40px";return{display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",maxHeight:`calc(100vh - (2 * ${s}))`,maxWidth:`calc(100% - (2 * ${s}))`,borderRadius:t.borders.radius500,boxShadow:t.lighting.shallowBelow,backgroundColor:t.colors.backgroundPrimary,color:t.colors.contentPrimary,overflow:"hidden",border:"none",paddingBottom:t.sizing.scale800,width:f[r],...p(n,s),...g(n),"@media (max-width: 599px)":{width:`calc(100% - (2 * ${i}))`,paddingBottom:0,maxWidth:"none",...p(h.El.bottomCenter,i),...g(h.El.bottomCenter)}}}));m.displayName="StyledRoot";const _=(0,u.I4)("div",(e=>{let{$theme:t}=e;return{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:t.colors.backgroundOverlay,animationDuration:"100ms",animationName:{from:{opacity:0},to:{opacity:1}}}}));_.displayName="StyledOverlay";const y=(0,u.I4)("div",(()=>({flex:1,overflowY:"auto",position:"relative",width:"100%"})));function v(e){return 1===e?{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:`${e}`,WebkitBoxOrient:"vertical"}}const b=(0,u.I4)("div",(e=>{let{$theme:t,$numHeadingLines:r=2,$shiftLeft:n}=e;return{position:"sticky",top:0,paddingTop:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:n?"52px":t.sizing.scale800,paddingBottom:t.sizing.scale300,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:n?"52px":t.sizing.scale600},backgroundColor:t.colors.backgroundPrimary,...v(r),...t.typography.HeadingMedium}}));b.displayName="StyledHeading";const A=(0,u.I4)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:t.sizing.scale800,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600},...t.typography.ParagraphLarge}}));A.displayName="StyledBody";var C=r(40014);function S(e){if((0,n.isValidElement)(e))return e;if("function"==typeof e){const t=e;return(0,C.Y)(t,{})}return null}const x=e=>{const t={...e.overrides,BaseButton:{...e.overrides?.BaseButton,style:{position:"absolute",top:"16px",right:"8px",backgroundColor:"rgba(255, 255, 255, 0.6)",zIndex:1,...e.overrides?.BaseButton?.style}}};return(0,C.Y)(l.A,{kind:c.Nd.secondary,shape:c.IW.circle,...e,overrides:t,children:(0,C.Y)(d.A,{size:36})})},w=e=>{let{artwork:t,buttonDock:r,children:l,onDismiss:c,showDismissButton:d=!0,hasOverlay:u=!0,heading:p,isOpen:g,overrides:f={},placement:v=h.El.center,numHeadingLines:w=2,size:E=h.SK.xSmall,autoFocus:I=!0}=e;const[k,O]=(0,a._O)(f.Root,m),[D,T]=(0,a._O)(f.ScrollContainer,y),[R,$]=(0,a._O)(f.Heading,b),[L,M]=(0,a._O)(f.Overlay,_),[H,P]=(0,a._O)(f.Body,A),[B,z]=(0,a._O)(f.ButtonDock,o.A),[N,Y]=(0,a._O)(f.DismissButton,x),U=(0,n.useRef)(null),F=(0,n.useRef)("undefined"!=typeof document?document?.body?.style?.overflow:"");return(0,n.useEffect)((()=>{const e=F.current;return document.body.style.overflow=g&&u?"hidden":e,()=>{document.body.style.overflow=e}}),[g,u]),g?(0,C.FD)(s.A,{onDocumentClick:function(e){e.target&&e.target instanceof HTMLElement&&e.target.contains(U.current)&&c&&c({closeSource:h.$9.backdrop})},onEscape:function(){c&&c({closeSource:h.$9.escape})},children:[u&&(0,C.Y)(L,{ref:U,...M}),(0,C.Y)(i.Ay,{returnFocus:!0,autoFocus:I,children:(0,C.FD)(k,{$size:E,$placement:v,role:"dialog","aria-labelledby":"dialog-title",...O,children:[c&&d&&(0,C.Y)(N,{onClick:()=>c({closeSource:h.$9.dismissButton}),...Y}),(0,C.FD)(D,{...T,tabIndex:0,children:[S(t),(0,C.Y)(R,{$numHeadingLines:w,$shiftLeft:d,id:"dialog-title",...$,children:p}),(0,C.Y)(H,{...P,children:l})]}),r&&(0,C.Y)(B,{...r,...z})]})})]}):null}},74026:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(65416),i=r(14635);const s=()=>(0,n.d4)((e=>{let{features:t}=e;return t}))[i.Gv.capital_one_promo]},77361:(e,t,r)=>{"use strict";r.d(t,{Y:()=>b});var n=r(77243),i=r(71435),s=r(65926),a=r(77888),o=r(11797),l=r(40761),c=r("__fusion__6df2e69f8c"),d=r("__fusion__f632f0258c"),u=r(39027),h=r(4914),p=r(66764),g=r(86105),f=r(8474),m=r(64825),_=r(36291),y=r(34537),v=r(40014);const b=()=>{const e=(0,h.c)(),t=(0,g.W6)(),r=(0,m.A)(),n=(0,_.A)(),{pastOrders:a}=(0,y.A)(),o=a.hasLoaded&&a.data&&a.data.length>0;return(0,v.FD)(i.A,{heading:e("cvs_otchs.help_modal.heading"),isOpen:!0,hasOverlay:!0,buttonDock:{primaryAction:(0,v.Y)(s.A,{kind:"primary",onClick:()=>r((0,f.Hwd)(t.location)),children:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.button.got_it"})})},children:[(0,v.Y)(A,{icon:(0,v.Y)(c.default,{}),title:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.shopping.title"}),description:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.shopping.description"}),buttonText:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.button.call"}),onClick:()=>n({type:"CALL_SUPPORT"})}),o?(0,v.Y)(A,{icon:(0,v.Y)(d.default,{}),title:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.past_order.title"}),description:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.past_order.description"}),buttonText:(0,v.Y)(p.H,{id:"cvs_otchs.help_modal.button.view"}),onClick:()=>t.push((0,f.fg2)(t.location))}):null]})},A=e=>{let{icon:t,title:r,description:i,buttonText:c,onClick:d}=e;return(0,v.Y)(a.A,{artwork:()=>t,artworkSize:o.O.SMALL,endEnhancer:()=>(0,v.Y)(n.A,{marginLeft:"scale300",children:(0,v.Y)(s.A,{kind:"secondary",size:"small",shape:"pill",onClick:d,children:c})}),children:(0,v.FD)(l.A,{children:[r,(0,v.Y)(u._I,{children:i})]})})}},84507:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>Ce});var n=r(90417);const i=()=>{},s=e=>!(!e||"object"!=typeof e)&&("function"==typeof e.timing&&"function"==typeof e.increment),a=()=>({increment:i,timing:i}),o=e=>{try{const t=JSON.parse(e);return"object"==typeof t?t:{}}catch(e){return{}}},l=e=>{let t=!1;return(r,n)=>{t||(t=!0,e(r,n))}},c=(e,t)=>{if(e.xhr.readyState===e.xhr.UNSENT||e.xhr.readyState===e.xhr.DONE)return;Date.now()-e.lastResponse>t&&e.xhr.abort(),setTimeout(c,t,e,t)};function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}const u={ACK:"/events/ack",RECV:"/events/recv"},h={dca1:"dca",phx2:"phx"},p=(e,t,r)=>{switch(r){case"sameorigin":return`/ramen${h[t]}${u[e]||""}`;case"breeze":return`https://ramen${h[t]}.uber.com${u[e]||""}`;case"openid":return`https://ramen${h[t]}.uberinternal.com${u[e]||""}`;default:return`https://cn-${t}.uber.com/ramen${u[e]||""}`}},g={altitude:"x-uber-device-location-altitude",app:"x-uber-client-name",authorization:"Authorization",device:"x-uber-device",deviceId:"x-uber-device-id",deviceIds:"x-uber-device-ids",deviceModel:"x-uber-device-model",deviceOS:"x-uber-device-os",epoch:"x-uber-device-epoch",language:"x-uber-device-language",latitude:"latitude",longitude:"longitude",origin:"x-uber-origin",regionId:"x-uber-region-id",service:"x-uber-push-service",source:"x-uber-source",token:"x-uber-token",uuid:"x-uber-uuid",version:"x-uber-client-version",screenflowVersion:"x-uber-screenflow-client-version",appVariant:"x-uber-app-variant"},f=e=>(e.hasOwnProperty("device")||(e.device="web"),Object.keys(e).map((t=>{const r=g[t],n=e[t];if(r&&n)return[r,e[t]]})).filter(Boolean)),m=(e,t)=>e.slice(-1)===t?e.slice(0,-1):e,_=new RegExp(/\n\n$/),y=new RegExp(/^(close|data|event|id|):\s?(.*)/),v=e=>{let[t,r]=["",""];const n=y.exec(e);return n&&3===n.length&&([,t,r]=n),e.length>0&&!e.includes(":")&&(t=e),[t,r]},b=(e,t,r)=>{switch(t){case"event":e.name=r;break;case"data":e.data=`${e.data||""}${r}\n`;break;case"id":e.id=r}return e},A=e=>{let t={data:"",name:""},r="";return n=>{if(r+=n,_.test(r)){r=m(r,"\n");for(const n of r.split("\n")){if(""===n){t.data=m(t.data||"","\n"),e(t),t={data:"",name:""},r="";continue}if(":"===n[0])continue;const[i,s]=v(n);t=b(t,i,s)}}}};var C=r(82840);const S="undefined"!=typeof process&&process.release&&"node"===process.release.name,x=e=>"function"==typeof e?e():null,w=(e,t,r)=>({code:t,error:r,stopped:e});class E{constructor(e){this.callback=e.callback,this.user=e.user,this.manager=e.manager,this.authenticationMethod=e.authenticationMethod,this.session={active:!0,datacenter:e.datacenter,seq:0,uuid:(0,C.A)()},this.m3Client=s(e.m3Client)?e.m3Client:a(),this.initTimestamp=Date.now(),this.didFirstPoll=!1,e.returnHeaders&&(this.returnHeaders=!0),this.authenticateUser((e=>{if(e)return this.session.active=!1,void this.callback(e,null,this);this.maybeSendAck=((e,t)=>{let r=Date.now();return n=>(Date.now()-r>=t&&(r=Date.now(),e()),n)})(this.sendAck,3e4),this.retryPolling()}))}authenticateUser=e=>{if(!this.authenticationMethod||"sameorigin"===this.authenticationMethod)return void e();if("undefined"==typeof fetch||fetch.polyfill||S)return void e(w(!0,"unsupported_browser"));const t=p("ACK",this.session.datacenter,this.authenticationMethod);fetch(`${t}?seq=-1`,{credentials:"include",mode:"no-cors"}).then((e=>e.ok?e:fetch(`${t}?seq=-1`,{credentials:"include"}))).then((t=>{const r=200===t.status?void 0:w(!0,"authentication_failed");e(r)})).catch((t=>e(w(!0,"authentication_failed",t))))};startPolling=e=>{const t=`${p("RECV",this.session.datacenter,this.authenticationMethod)}?seq=${this.session.seq}`,r=[...f(this.user),["cache-control","no-cache"],["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean);this.session.stopPolling=((e,t)=>{const r=new XMLHttpRequest,n=l(t.onDisconnect),i=l(t.onConnect),s={lastResponse:Date.now(),xhr:r};let a=0,o=0;return r.onreadystatechange=()=>{if(r.readyState===r.LOADING||r.readyState===r.DONE){r.status<400&&i(null),s.lastResponse=Date.now();const e=r.responseText.substring(o);o=r.responseText.length,t.callback(e)}const e=r.readyState<a;if(a=Math.max(r.readyState,a),r.readyState===r.DONE||e){let i={connectionClosed:r.readyState===r.DONE,responseText:r.responseText,statusCode:r.status,timestamp:(new Date).toISOString(),userAborted:e};t.returnHeaders&&(i={...i,requestHeaders:r._headers,responseHeaders:r.responseHeaders}),n(null,i)}},r.onerror=e=>{r.abort(),n(new Error(e))},r.open("GET",e),r.withCredentials=!0,t.headers.map((e=>{let[t,n]=e;return r.setRequestHeader(t,n)})),r.send(),s.lastResponse=Date.now(),c(s,t.disconnectInterval),()=>r.abort()})(t,{callback:d(A(this.handleEvent),this.maybeSendAck),disconnectInterval:2e4,headers:r,onDisconnect:e,returnHeaders:this.returnHeaders,onConnect:()=>{this.manager&&this.manager.notifyConnection(this)}})};retryPolling=()=>{const e=Date.now();this.m3Client.increment("request",{method:"recv"}),this.didFirstPoll||(this.m3Client.timing("client-ready",Date.now()-this.initTimestamp),this.didFirstPoll=!0),this.startPolling(((t,r)=>{this.session.active?(t?this.callback(w(!1,"client_error",t),null,this):this.callback(w(!1,"client_disconnected",r),null,this),this.m3Client.timing("latency",Date.now()-e,{method:"recv"}),setTimeout(this.retryPolling,5e3)):this.callback(w(!0,"session_inactive",t),null,this)}))};sendAck=()=>{const e=p("ACK",this.session.datacenter,this.authenticationMethod),t=Date.now();this.m3Client.increment("request",{method:"ack"}),((e,t,r)=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(n.readyState===n.DONE){if(n.status<200||n.status>=300){let e={message:n.responseText,status:n.status};return t.returnHeaders&&(e={...e,requestHeaders:n._headers,responseHeaders:n.responseHeaders}),void r(e)}r(null,o(n.responseText))}},n.open(t.method,e),n.timeout=t.timeout||3e4,n.withCredentials=!0,t.headers.map((e=>{let[t,r]=e;return n.setRequestHeader(t,r)})),n.send(t.body||null)})(`${e}?seq=${this.session.seq}`,{headers:[...f(this.user),["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean),method:"GET",returnHeaders:this.returnHeaders},(e=>{e&&this.callback(w(!1,"ack_failed",e),null,this),this.m3Client.timing("latency",Date.now()-t,{method:"ack"})}))};handleEvent=e=>{if((e=>!(e.name||e.data||e.seq))(e))return;if("close"===e.name)return void x(this.session.stopPolling);const{msg:t}=o(e.data);"rmn-msg-v1"===e.name&&Array.isArray(t)?t.map(this.handleMessage):this.callback(w(!1,"unrecognised_message",e),null,this)};handleMessage=e=>{Number.isFinite(e.seq)&&e.seq>this.session.seq&&(this.session.seq=e.seq),this.callback(null,e,this)};stop=()=>{this.session.active=!1,x(this.session.stopPolling)}}var I=r(11570),k=r.n(I);const O=["phx2","dca1"];const D=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.user)throw new Error("RamenJS init error: `options.user` is required");if(!e.user.app)throw new Error("RamenJS init error: `options.user.app` is a required field");this.handlers={message:[],connect:[],disconnect:[],error:[]},this.clients=[],this.disconnectionTimeout=e.disconnectionTimeout||15e3,this.user=e.user;const t=e.dc||e.datacenter||O;return this.dcs=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e[t]={status:"disconnected",timeout:null},e)),{}),this.authenticationMethod=e.authenticationMethod||"sameorigin",this.m3Client=s(e.m3Client)?e.m3Client:a(),this.mockedClient=e.mockedClient||!1,this}on(e,t){return this.handlers.hasOwnProperty(e)&&(this.handlers[e].push(t),this.initializeClients()),this}off(e,t){if(!this.handlers.hasOwnProperty(e))return this;if(!t&&this.handlers[e].length)this.handlers[e]=[];else{const r=this.handlers[e].indexOf(t);-1!==r&&this.handlers[e].splice(r,1)}return this.hasSubscribers()||this.stopClients(),this}initializeClients(){this.clients.length||this.mockedClient||Object.keys(this.dcs).forEach((e=>{const t=new E({datacenter:e,user:this.user,authenticationMethod:this.authenticationMethod,m3Client:this.m3Client,callback:this.handleClientResponse.bind(this),manager:this});this.clients.push(t)}))}handleClientResponse(e,t,r){if(e){const t=r.session.datacenter;this.dcs[t]&&(this.dcs[t].lastError=e,this.dcs[t].timeout||"disconnected"===this.dcs[t].status||(this.dcs[t].timeout=setTimeout((()=>{this.dcs[t].status="disconnected",this.dcs[t].timeout=null,this.trigger("disconnect",{...this.getConnectionStatus(),error:this.dcs[t].lastError},r)}),this.disconnectionTimeout))),this.trigger("error",e,r)}else if(t){let e=t.msg;try{e=JSON.parse(`${e}`)}catch(e){this.trigger("error",`parsing error ${e}`,r)}this.trigger("message",{...t,msg:e},r)}}trigger(e,t,r){const n=r?{dc:k()(r,"session.datacenter")}:{};this.handlers[e].forEach((e=>{e(t,n)}))}stopClients(){}hasSubscribers(){for(let e of Object.keys(this.handlers))if(this.handlers[e].length)return!0;return!1}getConnectionStatus(){let e=!1,t=!1;return{details:Object.keys(this.dcs).reduce(((r,n)=>{const i=this.dcs[n].status;return"connected"===i?t=!0:e=!0,r[n]=i,r}),{}),status:t?e?"limited":"connected":"disconnected"}}notifyConnection(e){const t=e.session.datacenter,r=k()(this.dcs[t],"timeout");clearTimeout(r);let n="connected"!==k()(this.dcs[t],"status");this.dcs[t]={status:"connected",timeout:null,lastError:null},n&&this.trigger("connect",this.getConnectionStatus(),e)}},T=D;var R=r(50371),$=r(74225),L=r(48674),M=r(62877);var H=r(84183),P=r(31725),B=r(33435),z=r(21997),N=r(89831),Y=r(65416),U=r(8474),F=r(91156),V=r(87731),G=r(5204),j=r(84167),q=r(73077),K=r(11752),Q=r(86105),W=r(92671),X=r(15255),Z=r(95370),J=r(41442),ee=r(26258),te=r(39592),re=r(8301),ne=r(69229),ie=r(20075);const se=["pendingRating","ratingSubmitted","orderRating"];var ae=r(5230),oe=r(28679),le=r(16439),ce=r(40304),de=r(66146),ue=r(33010),he=r(82801),pe=r(71715),ge=r(27335),fe=r(32879),me=r(96452),_e=r(23977),ye=r(85906),ve=r(89864),be=r(8330);function Ae(e,t,r){return e?"postmates":t?"orchid":r?"cvs_otchs":"ubereats"}const Ce=()=>{const e=(0,K.A)(),t=(0,V.A)(),r=(0,F.Ay)(),i=(0,R.W6)(),s=(0,Q.zy)(),a=(0,L.Am)(M.gQ),{user:o}=(0,H.A)(),l=o.data?.isLoggedIn,c=(0,le.A)();let d=(0,P.A)("web_ramen");const u=(0,P.A)("nsw_age_verification"),h=(0,ce.vm)({...de.A.checkout_2fa_redirect_ramen,defaultValue:!1}),p=(0,ce.vm)({...me.h.enable_web_live_order_editing_ramen_push,defaultValue:!1}),g=(0,ce.vm)({...ue.w.membership_hero_disable_preview_ramen,defaultValue:!1}),f=(0,N.wA)(),{setActiveDraftOrder:m}=(0,pe.A)(),_=(0,ge.A)("getDraftOrderByUuidV2"),y=(0,$.useQueryClient)(),{hideSidebarCart:v}=(0,ve.lK)(),b=(0,Y.d4)((e=>{let{ramen:t}=e;return t})),A=(0,n.useRef)(0),S=(0,n.useRef)(null),x=(0,n.useRef)({}),w="postmates"===(0,G.A)(),E=(0,ae.A)(),I=(0,oe.A)(),k=(0,q.QO)(e),O=function(){const e=(0,P.A)("eater_message_interstitials"),t=(0,J.A)(),r=(0,F.Ay)(),i=(0,ne.A)(),{search:s,pathname:a}=(0,Q.zy)(),{getEaterMessageInterstitialSessionCapper:o}=(0,ee.A)(),{isSavingsLanding:l,isSavingsLandingInterstitial:c}=(0,te.A)(),d=(0,ie.A)(),u=l||c,h=(0,n.useCallback)((e=>Boolean((0,R.B6)(a,e))),[a]);return(0,n.useCallback)((n=>{if(!n?.messages?.length)return!1;const{surface:a,surfaceId:l,message:c}=n.messages[0]||{},p=t({surface:a,surfaceId:l,...c});i&&r("eats:eater_message_ramen_log",{eaterMessage:{ramenMsg:JSON.stringify(n),surface:l||W.Og.UNKNOWN}});const g=String(re.parse(s)[U.Q71.modalName]),f=se.includes(g),m=Boolean(p),_=p?.payload,y="modalPayload"===_?.type&&_?.modalPayload.uuid||"",{hasPromotionBanner:v,hasExpandedModalState:b}=(0,X.n)(p),A=!u&&(!v||b);if(d&&"locationManager"===g)return!1;switch(l){case W.Og.HOME_FEED_PUSH_BOTTOM_MODAL:return e&&!o(W.Og.HOME_FEED_PUSH_BOTTOM_MODAL,y)&&m&&A&&h(Z.K.home_feed);case W.Og.VERTICAL_FEED_PUSH_BOTTOM_MODAL:return e&&!o(W.Og.VERTICAL_FEED_PUSH_BOTTOM_MODAL,y)&&m&&A&&h(Z.K.vertical_feed);case W.Og.ORDER_TRACKING_PUSH_BOTTOM_MODAL:return e&&!o(W.Og.ORDER_TRACKING_PUSH_BOTTOM_MODAL,y)&&m&&!h(Z.K.vertical_feed);case W.Og.ORDER_COMPLETE_PUSH_BOTTOM_MODAL:return e&&!o(W.Og.ORDER_COMPLETE_PUSH_BOTTOM_MODAL,y)&&!f&&m;default:return!1}}),[s,i,e,o,r,t,u,h,d])}(),D=(0,n.useContext)(j.nW),{liveOrderUuid:Ce}=(0,_e.G)(),Se=(0,ye.u)({getCartFrom:"workflowId",workflowId:Ce}),xe=(0,n.useCallback)((e=>{D.set("chatMessageUuid",e)}),[D]),we=(0,n.useMemo)((()=>Boolean(g)&&D?.get(be.KT)===be.Lq.SIGNED_UP_FROM_HERO&&Boolean(l)&&!c),[D,l,c,g]),Ee=(0,ie.A)(),Ie=(0,n.useCallback)((async e=>{if(Ee&&s.pathname.includes("/feed")){if(["eater_message_service_screen_messages","home_membership_modal"].includes(e.type))return}switch(e.type){case"chat":return void("system"!==e.msg.messageType&&xe(e.uuid));case"eater_message_service_screen_messages":if(O(e.msg)){const t=(e.msg.messages||[])[0].surfaceId||"";i.push((0,U.KAE)(s,t))}return;case"home_membership_modal":return void(we||(r("eats:home_membership_modal_ramen_message_received"),i.push((0,U.WVd)(s,e.uuid))));case"push_web_eats_verification_result":return void(u&&i.push((0,U._61)(s,e.msg.flowStatus)));case"eater_draft_order":{const t=e.msg;if(h&&t?.action===he._v.NAVIGATE_TO_CHECKOUT){const e=t?.draftOrder?.uuid||"";_({draftOrderUUID:e}).then((async()=>{m(e),r("eats:eater_draft_order_ramen_push_redirect_success"),i.replace((0,U.my9)(s)),await y.invalidateQueries(fe.Hr.draftOrder(e))})).catch((e=>{r("eats:eater_draft_order_ramen_push_redirect_error",{error:e})}))}return}case"eater_all_order_entities":if(p){if(!Ce)return;const t=e.msg?.orderEntitiesView;Boolean(t?.find((e=>e.orderIdentifiers?.workflowUUID===Ce)))||(v(),await y.invalidateQueries(["getActiveOrdersV1"]),i.replace((0,U.Ysx)(s,{uuid:Ce})))}return;case"eater_order_entity":if(p){const t=e.msg,n=t?.orderEntity,{workflowUUID:i,orderUUID:s}=n?.orderIdentifiers||{};if(!(i===Ce&&n&&s&&Se&&i))return;"AVAILABLE"!==Se.status&&"SYNCING"!==Se.status&&"LOADING"!==Se.status||Se.actions.syncCart({rawCartData:{liveOrder:n},workflowUUID:i,orderUUID:s}).catch((e=>r("eats:live_order_cart_sync_failed",{error:e})))}return;default:return}}),[xe,O,i,s,r,u,h,_,y,m,p,Se,Ce,v,we,Ee]);return(0,n.useEffect)((()=>{(async()=>{if(b.messageQueue.length>0&&A.current<b.messageQueue.length){for(let e=A.current;e<b.messageQueue.length;e++){const t=b.messageQueue[e]||"",r=b.messageMap[t];r&&await Ie(r)}A.current=b.messageQueue.length}})().catch((e=>{r("eats:ramen_handle_function_error",{error:e})}))}),[r,Ie,b]),(0,n.useEffect)((()=>{d&&l&&!S.current&&(S.current=new T({m3Client:a,user:{app:"eats_web",device:"eats-web",deviceId:k||(0,C.A)(),language:t,origin:"eats-web",source:"eats-web",version:"1.0.0",appVariant:Ae(w,E,I)}}).on("message",(e=>(function(e,t,r){e&&(r.current[e.uuid]||t((0,z.K)(e)),r.current[e.uuid]=!0)}((0,B.U)(e),f,x),()=>{S.current&&S.current.off("message")}))))}),[f,l,d,t,a,w,E,I,k,r]),null}},85906:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(90417),i=r(23933);const s=e=>{const t=(0,i.B_)(),r=t.liveOrderQueue.getLiveOrderQueueFromCache,s=(0,n.useCallback)((e=>r({type:"cartId",cartId:e})),[r]),[a,o]=(0,n.useState)((()=>s(e.workflowId)));(0,n.useEffect)((()=>{o(s(e.workflowId))}),[e.workflowId,s]);const l=(0,n.useCallback)((e=>a.subscribe(e)),[a]),c=(0,n.useSyncExternalStore)(l,(()=>a.getSnapshot()),(()=>a.getSnapshot()));return(0,n.useMemo)((()=>{if("FETCHING"===t.liveOrderQueue.state)return{status:"LOADING",actions:{syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}};switch(c.status){case"OUTDATED":case"UPDATING":case"DELETING_CART":case"CREATING_CART":case"MISSING_CART":return{status:"OUTDATED",rawCartData:c.rawCartData};case"INACTIVE":return{status:"LOADING",actions:{syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}};case"IN_SYNC":case"OUT_OF_SYNC":case"SYNCING":return{status:"SYNCING"===c.status?"SYNCING":"AVAILABLE",rawCartData:c.rawCartData,actions:{editCartItem:async e=>a.pushInteraction({type:"EDIT_CART_ITEM",payload:e}),processItemFeedback:async e=>a.pushInteraction({type:"PROCESS_ITEM_FEEDBACK",payload:e}),confirmCartUpdates:async e=>a.pushInteraction({type:"CONFIRM_CART_UPDATES",payload:e}),syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}}}}),[t.liveOrderQueue.state,a,c.rawCartData,c.status])}},87893:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(76905);const i=(0,n.I4)("div",(e=>{let{$theme:t}=e;return{boxSizing:"border-box",display:"flex",flexDirection:"column",gap:t.sizing.scale300,width:"100%",paddingTop:t.sizing.scale600,paddingBottom:t.sizing.scale600,backgroundColor:t.colors.backgroundPrimary,container:"root / inline-size"}}));i.displayName="StyledRoot";const s=(0,n.I4)("div",(e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale600,paddingLeft:t.sizing.scale600,"@container root (inline-size > 600px)":{paddingRight:t.sizing.scale800,paddingLeft:t.sizing.scale800}}}));s.displayName="StyledTopAccessoryContainer";const a=(0,n.I4)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300,paddingRight:t.sizing.scale600,paddingLeft:t.sizing.scale600,"@container root (inline-size > 600px)":{flexDirection:"row",justifyContent:"space-between",paddingRight:t.sizing.scale800,paddingLeft:t.sizing.scale800}}}));a.displayName="StyledActionContainer";const o=(0,n.I4)("div",(e=>{let{$reverseWhenWide:t,$theme:r}=e;return{display:"flex",flexDirection:"column",gap:r.sizing.scale300,"@container root (inline-size > 600px)":{flexDirection:t?"row-reverse":"row"}}}));o.displayName="StyledActionSubContainer";var l=r(49728),c=r(40014);const d=e=>{const{primaryAction:t,secondaryActions:r,dismissiveAction:n,topAccessory:d,overrides:u={}}=e,[h,p]=(0,l._O)(u.Root,i),[g,f]=(0,l._O)(u.TopAccessoryContainer,s),[m,_]=(0,l._O)(u.ActionContainer,a),[y,v]=(0,l._O)(u.ActionSubContainer,o);return(0,c.FD)(h,{...p,children:[d&&(0,c.Y)(g,{...f,children:d}),(0,c.FD)(m,{..._,children:[(0,c.Y)(y,{...v,children:r}),(0,c.FD)(y,{$reverseWhenWide:!0,...v,children:[t,n]})]})]})}},92665:(e,t,r)=>{"use strict";r.d(t,{$9:()=>s,El:()=>i,SK:()=>n});const n=Object.freeze({xSmall:"xSmall",small:"small",medium:"medium",large:"large"}),i=Object.freeze({center:"center",topLeft:"topLeft",topCenter:"topCenter",topRight:"topRight",bottomLeft:"bottomLeft",bottomCenter:"bottomCenter",bottomRight:"bottomRight"}),s=Object.freeze({dismissButton:"dismissButton",backdrop:"backdrop",escape:"escape"})},93116:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(90417),i=r(35152),s=r(84167);const a="hasVisitedFeed",o=()=>{const e=(0,i._l)((e=>e.pathname)),t=(0,s.Fo)();return(0,n.useEffect)((()=>{e?.includes("/feed")&&t&&t.set(a,"true")}),[e,t]),!(!t||!e)&&(e.includes("/feed")||"true"===t.get(a))}},97082:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(69814),i=r(79994),s=r("__fusion__95b4ba69e5");const a=()=>{const e=(0,n.A)();return s.useCallback((t=>e({type:i.Z.LAUNCH_DEEPLINK,payload:{launchDeeplink:{url:t}}})),[e])}},99583:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(40304),i=r(1139);const s=()=>(0,n.vm)({...i.z.buy_an_item_enabled,defaultValue:!1})},__fusion__f632f0258c:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(90417),i=r(40014);const s=n.forwardRef((function(e,t){let{title:r="Receipt",titleId:n,size:s="1em",...a}=e;return(0,i.FD)("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":n,...a,children:[void 0===r?(0,i.Y)("title",{id:n,children:"Receipt"}):r?(0,i.Y)("title",{id:n,children:r}):null,(0,i.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 23V1h18v22l-5.5-3-3.5 3-3.5-3L3 23ZM7 9h10V6H7v3Zm10 3H7v3h10v-3Z",fill:"currentColor"})]})}))}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/web-eats-v2/client-27457-bd3f25097ced4e8b.js.map