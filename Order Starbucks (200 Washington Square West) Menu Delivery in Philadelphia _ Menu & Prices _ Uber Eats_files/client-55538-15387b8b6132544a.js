"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[55538],{42957:(e,t,i)=>{i.d(t,{A:()=>n});var o=i(79193),a=i(90417);const n=()=>{const[e,t]=(0,a.useState)(0),[i,n]=(0,a.useState)(0),s=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(o.A){s.current||(s.current=!0,t(o.A.innerWidth),n(o.A.innerHeight));const e=()=>{o.A&&(t(o.A.innerWidth),n(o.A.innerHeight))};return o.A.addEventListener("resize",e),()=>{o.A&&o.A.removeEventListener("resize",e)}}}),[]),{windowWidth:e,windowHeight:i}}},81973:(e,t,i)=>{i.d(t,{tn:()=>u,t5:()=>c});var o=i("__fusion__95b4ba69e5"),a=i(90417);var n=i(96310),s=i(48674),r=i(1346),l=i(40014);const d=o.createContext(null),u=o.memo((function(e){const[t,i]=(0,a.useState)(void 0),n=(0,a.useCallback)(((e,t)=>{const o=((e,t)=>({storeUuid:e?.storeUuid||t||"",itemUuid:e?.uuid||"",sectionUuid:e?.sectionUuid||void 0,subsectionUuid:e?.subsectionUuid||void 0}))(e,t);i(o)}),[]),s=o.useMemo((()=>({onPrefetchMenuItem:n,item:t})),[n,t]);return(0,l.Y)(d.Provider,{value:s,children:e.children})})),c=()=>{const e=(0,s.Am)(r.iL),t=(0,n.A)(),i=(0,a.useContext)(d);if(t&&null!=i)return i;if(t){const t=new Error("usePrefetchMenuItem: PrefetchMenuItemProvider is missing in the component tree.");e?.warn(t.message,{stack:t.stack})}return{item:void 0,onPrefetchMenuItem:()=>{}}}},88632:(e,t,i)=>{i.d(t,{A:()=>h});var o=i(41967),a=i(57716),n=i(75344),s=i(59160),r=i(8474),l=i(2693),d=i(97872),u=i(86105),c=i(91156),m=i(40014);const p=(0,o.I4)(a.N_,(e=>{let{$smallSize:t,$theme:i}=e;return{...(0,d.b)({$theme:i}),...t?i.typography.LabelSmall:i.typography.LabelMedium,padding:"8px 12px",borderRadius:i.borders.pillButtonBorderRadius,display:"inline-flex",alignItems:"center",cursor:"pointer"}})),h=e=>{let{eventType:t,linkText:i,smallSize:o,onClick:a}=e;const d=(0,u.zy)(),h=(0,s.jH)(),g=(0,c.Ay)();return(0,m.FD)(p,{onClick:()=>{a&&a(),t&&g("eats:give_get_entry_click",{type:t})},to:(0,r.zep)(d),$smallSize:o,children:[i,(0,m.Y)(l.Ay,{$width:"2px"}),(0,m.Y)(n.A,{type:"ArrowLeft",rotate:"ltr"===h?180:0,color:"buttonSecondaryText",height:"20px",width:"20px"})]})}},96132:(e,t,i)=>{i.d(t,{A:()=>z});var o=i(50371),a=i(74225),n=i(69775),s=i(57812),r=i(6463),l=i(69927),d=i(39431),u=i(49684),c=i(41967),m=i(72673),p=i(86105),h=i(57716),g=i(57866),y=i(56874),U=i(65888),A=i(8474),v=i(73792),f=i(17283),b=i(40014);const I={minWidth:0,display:"flex",flexDirection:"column",width:"100%"},S=(0,c.I4)(h.N_,I),k=(0,c.I4)("div",I),C=(0,c.I4)("div",{display:"flex",justifyContent:"space-between"}),_=(0,c.I4)("div",(e=>{let{$theme:t,$shouldVirtualize:i,$hasPaddingBottom:o}=e;return{position:"relative",display:"flex",alignItems:"center",minWidth:0,overflow:"hidden",...i?{paddingTop:t.sizing.scale600,paddingBottom:o?t.sizing.scale600:t.sizing.scale100}:{marginBottom:t.sizing.scale300,paddingBottom:o?t.sizing.scale300:0}}})),w=(0,c._F)(l.A,(e=>{let{$width:t,$height:i,$borderRadius:o,$theme:a}=e;return{width:t,height:i,flex:"none",overflow:"hidden",borderRadius:o,marginRight:a.sizing.scale600}})),$=(0,c.I4)("div",(e=>{let{$shouldVirtualize:t=!1}=e;return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"initial",minWidth:0,width:"100%",alignSelf:"flex-end",...t?{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"}:null}})),D=(0,c.I4)("div",{flex:"1 1 0"}),x=h.N_;const z=function(e){let{store:t,useLazyLoadImage:l,shouldVirtualize:h,hasCarousel:I,customUrl:z,storeUrl:M,feedItem:L,position:P,pageType:Y}=e;const T=(0,p.zy)(),B=(0,o.W6)(),E=(0,a.useQueryClient)(),[,R]=(0,c.c6)(),F=(0,v.W)(),V=(0,y.A)(),q="string"==typeof z?.search?z?.search:"",{vertical:O}=(0,A.aGs)(q,["vertical"]),{userQuery:Q,vertical:N}=(0,A.g$k)(T,["userQuery","vertical"]),W=M||(0,m.NU)(T,t?.actionUrl),G=(0,f.CE)({feedStore:t,feedIndex:P,feedContext:Y,feedItem:L,diningMode:F,searchTerm:Q,selectedVertical:O||N}),H=(0,U.z)({impressionEventName:"marketplace_scrolled",payload:G}),K=(0,U.s)({tapEventName:"marketplace_selected",payload:G}),j=(0,b.FD)(b.FK,{children:[(0,b.Y)(C,{children:(0,b.Y)($,{$shouldVirtualize:Boolean(h),children:(0,b.Y)(u.A,{tag:"span",badge:t.title,baseFont:"LabelMedium"})})}),[t.meta,t.meta2].filter(Boolean).map(((e,t)=>(0,b.Y)(s.A,{meta:e,wrapText:!1},t))),t.signposts?(0,b.FD)(b.FK,{children:[(0,b.Y)(D,{}),(0,b.Y)(r.Ay,{signposts:t.signposts})]}):null,t.endorsements?(0,b.Y)(n.A,{endorsements:t.endorsements}):null]}),J=(0,b.FD)(b.FK,{children:[(0,b.Y)(g.A,{condition:!V,wrapper:e=>(0,b.Y)(x,{to:W,children:e}),children:(0,b.Y)(w,{storeUuid:t.storeUuid||"",image:t.image,sizes:"10vw",useLazyLoad:l,defaultHeroImageUrl:(0,d.uq)(i(76421)),$width:R.sizing.scale1600,$height:R.sizing.scale1600,$borderRadius:"100px"})}),V?(0,b.Y)(k,{children:j}):(0,b.Y)(S,{to:W,onClick:K,children:j})]});return V?(0,b.Y)(_,{onClick:async()=>{K(),B.push(W),z&&V&&(setTimeout((()=>{B.push(z)}),500),await E.removeQueries(["getStoreV1"]),await E.removeQueries(["getInStoreSearchV1"]))},$shouldVirtualize:Boolean(h),$hasPaddingBottom:!I,"data-testid":"feed-shared-mini-store",ref:H,children:J}):(0,b.Y)(_,{$shouldVirtualize:Boolean(h),$hasPaddingBottom:!I,"data-testid":"feed-shared-mini-store",ref:H,children:J})}},98934:(e,t,i)=>{i.d(t,{A:()=>G,M:()=>Q});var o=i("__fusion__95b4ba69e5"),a=i(90417),n=i(41967),s=i(61492),r=i(12719),l=i(8474),d=i(50371),u=i(86105),c=i(68363),m=i(59160),p=i(91156),h=i(57806),g=i(4507),y=i(3207),U=i(6954),A=i(67319),v=i(88134),f=i(98177),b=i(5592),I=i(27390),S=i(79193),k=i(71715),C=i(6198),_=i(71333),w=i(57716),$=i(96926),D=i(81464),x=i(56279),z=i(33972),M=i(76852),L=i(66371),P=i(56831),Y=i(12615),T=i(39996),B=i(43545),E=i(81896),R=i(84183),F=i(81973),V=i(54084),q=i(40014);const O=(0,n.I4)("div",(e=>{let{$isMenuItemLink:t}=e;return{display:"flex",flex:1,textDecoration:"none",cursor:t?"pointer":"default"}})),Q=(0,n._F)(r.fh,(e=>{let{$spanCount:t,$theme:i,$borderColor:o,$cornerRadius:a}=e;const n=(0,A.oU)(o),s=(0,v.gh)(a);return{position:"relative",gridColumn:`span ${t}`,...n&&{border:`1px solid ${i.colors[n]}`,borderRadius:`${s}px`}}})),N=(0,n.I4)("div",(e=>{let{$quickAddPosition:t}=e;return{position:"absolute",right:"8px",display:"flex",alignItems:"center",flexDirection:"row",...t===U.Pf.BOTTOM_TRAILING?{bottom:"8px"}:{top:"8px"}}})),W=e=>{const t=(0,d.g)(),i=(0,d.W6)(),n=(0,u.zy)(),{setRestoreScrollPosition:r}=(0,I.A)(),A=(0,p.Ay)(),v=(0,h.Ie)(),W=o.useRef(null),G=(0,g.A)(W),H=(0,f.z)(e.surface),K=(0,M.A)(),{primaryDraftOrderUUID:j,storeCatalogSections:J}=(0,l.g$k)(n,["primaryDraftOrderUUID","storeCatalogSections"]),X=(0,k.G)(),{consumerItemFulfillmentViewType:Z,isFulfilled:ee,showBlockedItemSnackbar:te}=(0,z.K)(e.item.uuid??""),{startTiming:ie}=(0,L.zR)(),oe=(0,Y.A)(),{user:ae}=(0,R.A)(),ne=(0,F.t5)().onPrefetchMenuItem,se=ee,re=!se&&Boolean(e.showQuickViewEntryPoint)&&K.hasQuickAdd,le=j||(X||void 0),de="link"===K.menuItem,ue=e.itemUrl??(0,l.hk0)({location:n,args:{...(0,l.G9G)(t),sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid,itemUuid:e.item.uuid||"",...e.isMultiSkuModal&&{referrer:l.R8i.multiSkuPromotion},...e.storeUuid&&{storeUuid:e.storeUuid},...e.slug&&{storeSlug:e.slug},...e.primaryBundledStoreUuid&&{primaryBundledStoreUuid:e.primaryBundledStoreUuid,primaryDraftOrderUUID:le,entryPoint:H}},previousContext:H}),ce=J===P.A2?"deals":J?"order_again":"shop",me={storeCatalog:{storeUuid:e.storeUuid,sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid,itemUuid:e.item.uuid||"",itemPosition:e.item.catalogItemAnalyticsData?.catalogSectionItemPosition??void 0,endorsementAnalyticsTag:e.item.endorsementAnalyticsTag||"",itemDisplayType:e.item.displayType||"",catalogSectionType:e.catalogSectionType,sectionTitle:e.sectionTitle,sourceType:e.surface,catalogSectionAnalyticsData:e.catalogSectionAnalyticsData,analyticsLabel:e.item.analyticsLabel||"",feedType:ce,verticalLabel:e.isGrocery?"GROCERY":"RESTAURANT",isAvailable:e.item.isAvailable??void 0,hasCheaperAlternative:e.item.hasCheaperAlternative??void 0,...J?{originalCatalogSectionUuid:J}:null}},pe={storeUuid:e.item.storeUuid||"",sectionUuid:e.item.sectionUuid||"",subsectionUuid:e.item.subsectionUuid||"",itemUuid:e.item?.uuid||"",source:"search",position:String(e.position),carouselPosition:e.position,feedItemUuid:e.item?.uuid||"",trackingCode:e.trackingCode},he=(0,D.A)({eventName:"eats:single_catalog_item_impression",intersectionObserverProps:{threshold:.75},eventPayload:pe}),ge=o.useMemo((()=>({catalogSection:e.catalogSectionAnalyticsData})),[e.catalogSectionAnalyticsData]),ye=e.item.quickAddConfig,Ue=ye?.position,Ae=(0,y.A)()&&(ye?.shouldShow??!0)&&!e.shouldHideQuickAdd&&K.hasQuickAdd,ve=Ae&&e.isOpen&&Boolean(e.item.isAvailable??!0),fe=(0,C.Ay)(e.item.uuid||""),be=e.cartItemCount??fe,Ie=be&&!Ae,Se=Boolean(e.showOutOfStockShowSimilarPill&&!e.item.isAvailable&&!Ie&&e.item.showSimilarLabel),ke=(0,D.A)({eventName:"eats:out_of_stock_item_impression",shouldEmit:Se,eventPayload:{storeUuid:e.storeUuid??"",itemUuid:e.item.uuid??"",sectionUuid:e.sectionUuid??"",subsectionUuid:e.subsectionUuid??""}}),Ce=e.trackingCode?[he,W,ke]:[W,ke],_e=(0,x.A)(...Ce),we=(0,m.jH)(),$e=e.item?.itemAvailabilityState===U.Cd.LIKELY_UNAVAILABLE,De=(0,$.A)(me);o.useEffect((()=>{$e&&A("eats:item_availability_store_carousel_low_availability_impression",{itemAvailabilityStoreAndItem:{lowAvailabilityItemUuid:e.item?.uuid||"",catalogSectionUuid:e.sectionUuid||""}})}),[A,$e,e.item?.uuid,e.sectionUuid]);const{isMultiSkuModal:xe,refetchMultiSkuModalBanner:ze}=e,Me=(0,a.useCallback)((()=>{xe&&ze&&ze()}),[xe,ze]);return(0,q.Y)(Q,{$as:e.as??"li",$spanCount:1,ref:_e,$borderColor:e.itemStyle?.borderColor,$cornerRadius:e.itemStyle?.cornerRadius,children:(0,q.Y)(T.A,{type:"login",children:t=>{let{onClick:o}=t;return(0,q.Y)(B.A,{isEligible:!ae.data?.isLoggedIn&&!oe,experimentParams:E.P.storefront_auth_vs_add_nudge,children:t=>(0,q.Y)("div",{children:(0,q.Y)(O,{...de?{ref:De,tabIndex:0,to:t?null:ue,onContextMenu:e=>{se&&e.preventDefault()}}:{},onClick:a=>{t&&(A("eats:redirect_authentication_attempt",{source:"quick-view-item"}),o());const n=se&&de;n||a.target.closest(`.${s.c}`)?(a.preventDefault(),a.stopPropagation(),n&&te?.(Z,e.item.title)):((t,o)=>{if(!de)return void A("eats:lost_store_catalog_item_tap",{storeCatalog:{storeUuid:e.storeUuid,sectionUuid:e.sectionUuid,itemUuid:e.item.uuid||""}});if(t.metaKey||t.ctrlKey)return;t.preventDefault();const a=e.isQuickView?"quick_view_loaded":"product_details_loaded";ie(`${a}_${e.item.uuid}`,{metadata:{entryPoint:H}}),A("eats:store_catalog_item_tap",me),S.A&&r(S.A.scrollY),e.item.itemAd&&v("ads:ads_click",{adsAnalyticsEvent:{adEventType:b.S.CLICK,adImpressionUUID:e.item.itemAd.impressionId||"",adData:e.item.itemAd.adData||"",analyticsLabel:e?.item?.analyticsLabel??void 0,bidderUUID:null===e.storeUuid?void 0:e.storeUuid,collectionRank:e?.item?.catalogItemAnalyticsData?.catalogSectionItemPosition??void 0}}),e.emitPickedForYouSectionItemEvent?.(me),e.onCatalogItemClickEvent?.({storeUuid:e.storeUuid,itemUuid:e.item.uuid||""}),e.onLowAvailabilityAlternateItemClick?.({alternateItemUuid:e.item.uuid||"",storeUuid:e.storeUuid}),o||(!be&&ne(e.item,e.storeUuid),i.push(ue))})(a,t)},$as:de?w.N_:"div",$isMenuItemLink:de,children:(0,q.Y)(s.A,{item:e.item,quickAdd:ve,cartItemCount:e.cartItemCount,direction:we,isHovering:G,storeUuid:e.storeUuid,sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid,showQuickViewEntryPoint:re&&!t,itemStyle:e.itemStyle,isGrocery:e.isGrocery,primaryBundledStoreUuid:e.primaryBundledStoreUuid,catalogSectionAnalyticsData:e.catalogSectionAnalyticsData,hasLazyloadOverflowContainer:e.hasLazyloadOverflowContainer,surface:e.surface,imageDimensions:e.imageDimensions,consumerItemFulfillmentViewType:Z,isMultiSkuModal:e.isMultiSkuModal,adsAnalyticsMetadata:{...e?.adsAnalyticsMetadata,position:e?.item?.catalogItemAnalyticsData?.catalogSectionItemPosition??void 0},keepImageSquareRatio:e.keepImageSquareRatio,lazyLoad:e.lazyLoad??!0,children:(0,q.FD)(N,{$quickAddPosition:Ue,children:[ve?(0,q.Y)(c.A,{isInteractionEnabled:ye?.isInteractionEnabled??!0,storeUUID:e.storeUuid,sectionUUID:e.sectionUuid,subsectionUUID:e.subsectionUuid,catalogSectionUUID:e.catalogSectionUuid,item:e.item,cartItemCount:e.cartItemCount,cartItemDecimalCount:e.cartItemDecimalCount,syncItemQuantity:e.syncItemQuantity,quickAddCount:e.quickAddCount,disabled:e.quickAddDisabled,quickAddSource:e.quickAddSource,itemAvailabilityState:e.item.itemAvailabilityState,sourceType:e.surface,analytics:ge,onClickEvent:Me,isMultiSkuModal:e.isMultiSkuModal,storeSlug:e.slug,searchTerm:e.searchQuery,adsAnalyticsMetadata:e?.adsAnalyticsMetadata}):null,Se?(0,q.Y)(V.A,{storeUuid:e.storeUuid,item:e.item,sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid,storeSlug:e.slug??""}):null,Ie?(0,q.Y)(_.A,{count:be}):null]})})})})})}})})},G=o.memo(W)}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/web-eats-v2/client-55538-15387b8b6132544a.js.map