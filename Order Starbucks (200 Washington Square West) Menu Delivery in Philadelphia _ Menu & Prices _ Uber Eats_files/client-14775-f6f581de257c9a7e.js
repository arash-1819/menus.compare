"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[14775],{14775:(e,t,i)=>{i.d(t,{A:()=>y});var r=i(90417),l=i(23983),n=i(86457),a=i(69710),o=i(41967),d=i(57921),s=i(63811),c=i.n(s),h=i(40527),g=i(46153),p=i(86471),u=i(40014);const m=(0,o.I4)("ul",(e=>{let{$theme:t,$supportsScrollSnapping:i,$textDirection:r}=e;const l=t.sizing.scale800;return{display:"flex",flexShrink:0,flexGrow:0,flexBasis:"100%",width:"100%",...i?{scrollSnapAlign:"start"}:{},..."ltr"===r?{marginRight:l}:{marginLeft:l}}})),f=(0,o.I4)("li",(e=>{let{$theme:t,$textDirection:i}=e;const r="22px";return{..."ltr"===i?{marginRight:r}:{marginLeft:r}}})),y=e=>{let{featuredStores:{stores:t,header:i},feedItemUuid:o,customEventMetadata:s,position:y,feedItem:x}=e;const{containerRef:A,getPageChunks:Y,getPageProps:b,isPreviousPageDisabled:w,isNextPageDisabled:$,handlePageChange:I,supportsScrollSnapping:C,textDirection:v}=(0,n.A)(),D=A.current?.parentElement?Math.round(A.current.parentElement.offsetWidth/152):8,k=(0,r.useMemo)((()=>{const e=t?.map(((e,i)=>(0,u.Y)(f,{$textDirection:v,children:(0,u.Y)(l.Ay,{store:e,metadata:{isDesktop:!0},imageSettings:{diameter:130,useLazyLoad:i>=D},analyticsInfo:{customEventMetadata:s,feedItemUuid:o,positionOnCarousel:i,positionOnFeed:y,carouselSize:t.length,feedItemType:x?.type}})},i)))??[];return Y(e,D)}),[t,Y,v,s,o,D,y,x]),{onScroll:S}=(0,h.A)(A,o),{onScroll:E}=(0,g.k)(),F=c()((e=>{S(e),E()}),500);return(0,u.Y)(d.A,{header:i,onPageChange:I,showPaginationButtons:(t?.length??0)>D,backwardEnabled:!w,forwardEnabled:!$,analyticsLabel:s?.analyticsLabel,children:(0,u.Y)(a.wq,{ref:A,$supportsScrollSnapping:C,onScroll:F,"data-testid":p.E.featuredStoresDesktopCarousel,children:k.map(((e,t,i)=>(0,u.Y)(m,{...b(t,i.length),children:e},t)))})})}},57921:(e,t,i)=>{i.d(t,{A:()=>F});var r=i(90417),l=i(41967),n=i(59160),a=i(66764),o=i(18297),d=i(37451),s=i(41519),c=i(70894),h=i(40014);const g=(0,l._F)(o.JV,(e=>{let{$theme:t}=e;return t.typography.LabelMedium})),p=e=>{let{callToAction:t,onViewAllClick:i,showArrow:l}=e;const n=(0,d.Ay)(),o=(0,s.A)()?c.N:n(t?.actionUrl),p=t?.text||(0,h.Y)(a.H,{id:"carousel.view_all"}),u=r.useCallback((()=>{"function"==typeof i&&i()}),[i]);return(0,h.Y)(g,{"data-testid":"view-all-external-button",onClick:u,href:o,children:p})};var u=i(67348),m=i(38537),f=i(43316),y=i(2693),x=i(12615),A=i(38399),Y=i(28375),b=i(95320),w=i(31725),$=i(91156),I=i(49807),C=i(26955);const v=(0,l.I4)("div",{display:"flex",alignItems:"center",justifyContent:"flex-end"}),D=(0,l.I4)("div",(e=>{let{$marginBottom:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",...t?{marginBottom:t}:{marginBottom:"24px"}}})),k=(0,l.I4)("div",{display:"flex"}),S=(0,l.I4)("div",{position:"relative",paddingRight:"12px"}),E=(0,l.I4)(f.A,(e=>{let{$textDirection:t,$size:i,$border:r,$borderRadius:l,$theme:n}=e;const a="large"===i?n.sizing.scale1400:n.sizing.scale1000;return{display:"flex",height:`${a}`,width:`${a}`,border:r,borderRadius:l,..."rtl"===t?{right:0,transform:"scaleX(-1)"}:{left:0}}})),F=e=>{let{header:t,backwardEnabled:i,forwardEnabled:l,showPaginationButtons:a,analyticsLabel:o,onPageChange:d,onViewAllClick:s,isExternalCTA:c,children:g,customEventMetadata:f,seoHeader:F,headerTypography:L,endIconProps:P,hideEndIcon:H,feedItemUuid:_}=e;const U=(0,x.A)(),M=(0,n.jH)(),z=(0,$.eh)(),R=(0,w.A)("fomo_feed_carousel_cta_enabled"),{callToAction:T}=t||{},O=H?null:t?.endIcon,B=_===b.g&&!R,V=T&&T.actionUrl&&T.actionUrl.includes("/search?")&&!U||B;(0,r.useEffect)((()=>{B&&z("eats:membership_fomo_cta_impression",{...(0,I.CE)(C.K$.MEMBERSHIP_HOME_FEED_CAROUSEL,{},C.rm.HOME_FEED,C.QQ.UPSELL_EXCLUSIVE_FOMO)})}),[z,R,B]);const q=c||(0,Y.A)(T?.actionUrl||""),K=(0,h.FD)(v,{children:[T&&!V?q?(0,h.Y)(p,{callToAction:T,onViewAllClick:s}):(0,h.Y)(A.Ay,{callToAction:T,onViewAllClick:s,analyticsLabel:o}):null,T&&a?(0,h.Y)(y.Ay,{$width:"40px"}):null,a?(0,h.Y)(u.A,{backwardEnabled:i,forwardEnabled:l,analyticsLabel:o,onPageChange:d,customEventMetadata:f}):null]});return F?(0,h.FD)(h.FK,{children:[(0,h.FD)(D,{children:[(0,h.FD)(k,{children:[(0,h.Y)(m.Ay,{header:t,headerTypography:L}),F&&O?(0,h.Y)(S,{children:(0,h.Y)(E,{src:O,$textDirection:M,$size:"small"})}):null]}),K]}),g]}):(0,h.FD)(h.FK,{children:[(0,h.FD)(D,{$marginBottom:"16px",children:[(0,h.FD)(k,{children:[O?(0,h.Y)(S,{children:(0,h.Y)(E,{src:O,$textDirection:M,$size:"large",$border:P?.border||"unset",$borderRadius:P?.borderRadius||"unset"})}):null,(0,h.Y)(m.Ay,{header:t,headerTypography:"HeadingSmall"})]}),K]}),g]})}},69710:(e,t,i)=>{i.d(t,{Ay:()=>w,Rs:()=>y,U_:()=>b,YW:()=>A,py:()=>Y,re:()=>f,wq:()=>x});var r=i(90417),l=i(86105),n=i(78130),a=i(76915),o=i(12304),d=i(89012),s=i(8474),c=i(41967),h=i(47719),g=i(66764),p=i(86457),u=i(91156),m=i(40014);const f=3,y=24,x=(0,c.I4)("div",(e=>{let{$supportsScrollSnapping:t}=e;return{overflowX:"scroll",display:"flex",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},cursor:"pointer",...t?{scrollSnapType:"x mandatory"}:{}}})),A=(0,c.I4)("ul",(e=>{let{$supportsScrollSnapping:t,$textDirection:i}=e;return{display:"flex",flexShrink:0,flexGrow:0,flexBasis:"100%",width:"100%",..."ltr"===i?{marginRight:`${y}px`}:{marginLeft:`${y}px`},...t?{scrollSnapAlign:"start"}:{}}})),Y=(0,c.I4)("li",(e=>{let{$textDirection:t}=e;const i="24px";return{flexShrink:0,flexGrow:0,width:"calc(33.333% - 18px)",..."ltr"===t?{marginRight:i}:{marginLeft:i}}})),b=(0,c.I4)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,background:t.colors.backgroundSecondary,height:"240px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"16px"}})),w=e=>{const{feedItemUuids:t}=(0,h.A)(),{stores:i,analyticsLabel:c,$as:w="h2"}=e,$=(0,l.zy)(),{containerRef:I,getPageChunks:C,getPageProps:v,isPreviousPageDisabled:D,isNextPageDisabled:k,handlePageChange:S,supportsScrollSnapping:E,textDirection:F}=(0,p.A)({scrollOffset:y}),L=r.useMemo((()=>e.viewAllLocation?e.viewAllLocation:e.carouselId?(0,s.EfF)($,{carouselId:e.carouselId}):null),[e.viewAllLocation,e.carouselId,$]),P=i.map(((t,i)=>{const r=e.storesMap[t.uuid];return r?(0,m.Y)(Y,{$textDirection:F,children:(0,m.Y)(n.A,{store:r,heroImageHeight:e.heroImageHeight,showFavorite:e.showFavorite,location:$,trackingCode:t.trackingCode,position:i,trackingSource:e.trackingSource,styleOverrides:e.styleOverrides,analyticsLabel:c})},i):null})).filter(Boolean),H=r.useMemo((()=>i.map((e=>e.uuid))),[i]),_=C(P,f),U=(0,u.Ay)();return r.useEffect((()=>{U("eats:legacy_feed_store_carousel_impression")}),[U]),e.feedItemUuid&&t.includes(e.feedItemUuid)?(0,m.Y)(o.A,{analyticsLabel:c,entityUuids:H,carouselLayoutType:"store",children:(0,m.FD)("section",{children:[(0,m.Y)(a.A,{$as:w,title:e.title,subtitle:e.subtitle,viewAllLocation:L,paginated:!0,onPageChange:S,backwardEnabled:!1,forwardEnabled:!1,feedItemUuid:e.feedItemUuid,onViewAllClick:e.onViewAllClick}),(0,m.Y)(d.DE,{hideHeader:!0,heroImageHeight:e.heroImageHeight})]})}):(0,m.Y)(o.A,{analyticsLabel:c,entityUuids:H,carouselLayoutType:"store",children:(0,m.FD)("section",{children:[(0,m.Y)(a.A,{$as:w,title:e.title,subtitle:e.subtitle,viewAllLocation:L,paginated:i.length>f,onPageChange:S,backwardEnabled:!D,forwardEnabled:!k,feedItemUuid:e.feedItemUuid,onViewAllClick:e.onViewAllClick}),0===i.length?(0,m.Y)(b,{children:(0,m.Y)(g.H,{id:"bandwagon.no_restaurants"})}):(0,m.Y)(x,{ref:I,$supportsScrollSnapping:E,children:_.map(((e,t,i)=>(0,m.Y)(A,{...v(t,i.length),children:e},t)))})]})})}},89012:(e,t,i)=>{i.d(t,{Ay:()=>D,DE:()=>b,Iq:()=>I,J0:()=>w,hC:()=>v,p9:()=>C,vE:()=>Y,yA:()=>$});var r=i(90417),l=i(41967),n=i(87765),a=i(23963),o=i(49823),d=i(54444),s=i(44580),c=i(39182),h=i(23599),g=i(35360),p=i(26505),u=i(40014);const m=(0,l.I4)("div",{overflow:"hidden",position:"relative"}),f=(0,l.I4)("div",{overflow:"hidden",position:"relative",width:"fit-content",display:"inline-flex"}),y=(0,l.I4)("div",(e=>{let{$theme:t}=e;return{...(0,a.A)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:c.IQ.background}})),x=(0,l.I4)("div",{display:"flex"}),A=(0,l.I4)("div",(e=>{let{$theme:t}=e;return{position:"relative","::before":{backgroundColor:t.colors.backgroundPrimary,position:"absolute",top:0,bottom:0,left:`-${o.nC/2}px`,right:`-${o.nC/2}px`,content:'""'}}})),Y=e=>{let{miniStoreItemSize:t,hideHeader:i}=e;const r=g.kO/g.ID;return(0,u.FD)(m,{children:[(0,u.Y)(y,{}),i?null:(0,u.FD)(u.FK,{children:[(0,u.Y)(h.qd,{width:"240px",height:"24px"}),(0,u.Y)(h.lL,{$height:"24px"})]}),(0,u.Y)(d.A,{separator:()=>(0,u.Y)(h.lL,{$height:"24px"}),children:[...Array(g.ID)].map(((e,i)=>(0,u.Y)(o.xA,{children:(0,u.Y)(d.A,{separator:()=>(0,u.Y)(A,{}),children:[...Array(r)].map(((e,i)=>(0,u.Y)(o.fh,{span:12/r,children:(0,u.Y)(n.HD,{size:t})},`loading_${i}`)))})},`row_${i}`)))})]})},b=e=>{let{heroImageHeight:t=g.$4,hideHeader:i,colCount:r=3}=e;return(0,u.FD)(m,{children:[(0,u.Y)(y,{}),i?null:(0,u.FD)(u.FK,{children:[(0,u.Y)(h.qd,{width:"240px",height:"24px"}),(0,u.Y)(h.lL,{$height:"24px"})]}),(0,u.Y)(o.xA,{children:(0,u.Y)(d.A,{separator:()=>(0,u.Y)(A,{}),children:[...Array(r)].map(((e,i)=>(0,u.Y)(o.fh,{span:12/r,children:(0,u.Y)(n.Ay,{heroImageHeight:t})},`loading_${i}`)))})})]})},w=()=>(0,u.FD)(m,{children:[(0,u.Y)(y,{}),(0,u.FD)("div",{children:[(0,u.Y)(h.qd,{width:"240px",height:"24px"}),(0,u.Y)(h.lL,{$height:"12px"}),(0,u.Y)(h.qd,{width:"180px",height:"18px"})]})]}),$=e=>{let{colCount:t=8,$loadingPillHeight:i="36px",$loadingPillWidth:l="80px"}=e;return(0,u.FD)(f,{children:[(0,u.Y)(y,{}),(0,u.Y)(x,{children:(0,u.Y)(d.A,{separator:()=>(0,u.Y)(h.lL,{$width:"8px"}),children:[...Array(t)].map(((e,t)=>(0,u.Y)(r.Fragment,{children:(0,u.Y)(p.A,{$width:l,$height:i,$bgColor:"backgroundPrimary"})},`row_${t}`)))})})]})},I=()=>(0,u.FD)(m,{children:[(0,u.Y)(y,{}),(0,u.Y)(h.qd,{width:"100%",height:"200px"})]}),C=e=>{let{rowCount:t=3,colCount:i=3,heroImageHeight:r,withFilters:n=!0}=e;const[,a]=(0,l.c6)();return(0,u.FD)(m,{children:[n?(0,u.FD)(u.FK,{children:[(0,u.Y)($,{colCount:10,$loadingPillHeight:a.sizing.scale950,$loadingPillWidth:"100px"}),(0,u.Y)(h.lL,{$height:a.sizing.scale900})]}):null,(0,u.Y)(d.A,{separator:()=>(0,u.Y)(s.Ay,{$height:25}),children:[...Array(t)].map(((e,t)=>(0,u.Y)(b,{heroImageHeight:r,colCount:i,hideHeader:t>0},t)))})]})},v=e=>{let{rowCount:t=3,colCount:i=3,rowSpacerHeight:r=80,heroImageHeight:l,hideHeader:n}=e;return(0,u.Y)(d.A,{separator:()=>(0,u.Y)(s.Ay,{$height:r}),children:[...Array(t)].map(((e,t)=>(0,u.Y)(b,{heroImageHeight:l,hideHeader:n,colCount:i},t)))})},D=v}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/web-eats-v2/client-14775-f6f581de257c9a7e.js.map